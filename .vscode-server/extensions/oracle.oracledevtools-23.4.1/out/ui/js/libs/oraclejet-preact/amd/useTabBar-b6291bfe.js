define(['exports', 'preact/hooks', './mergeProps-31f70810', './collectionUtils-6a04588d', './useCollectionFocusRing-c762ed1d', './useCurrentKey-9f659a78', './useId-93f47e0a'], (function(e,t,r,n,o,s,c){"use strict";const u='[role="tab"]',i="data-oj-removable";const l=(e,t,r)=>{const o=e.closest(t);if(o){if(o?.hasAttribute(i)){const t=e.closest(r);if(t&&o?.contains(t))return null}return n.getKey(o)}return null},a=(e,t,r)=>{const n=r.indexOf(e);if(-1===n)return t[0];let o=0,s=!1;for(n===r.length-1?(o=n-1,s=!0):o=n+1;o!==n&&o>-1&&o<r.length;){const e=r[o];if(-1!==t.indexOf(e))return e;s?o--:o++}return t[0]};e.useTabBar=function(e){const{children:f,class:y,display:d,edge:g="top",selection:m,onSelect:v,onRemove:b,ref:p=t.useRef(null),size:K}=e,h=c.useId(),[R,k]=t.useState(m),[x,A]=t.useState(!1),E=h+"_",P=t.useRef();t.useEffect((()=>{if(p.current){const e=Array.from(p.current.querySelectorAll(u)).map((e=>n.getKey(e)));R&&!e.includes(R)&&(P.current?k(a(R,e,P.current)):k(e[0])),P.current=e}}),[f,R]);const[S,C]=o.useCollectionFocusRing(p,["ArrowRight","ArrowLeft","Home","End"]),{currentKeyProps:F}=s.useCurrentKey((e=>b?l(e,u,'[data-oj-tabbar-item-remove-icon="true"]'):n.keyExtractor(e,u)),!1,void 0,void 0,n.getPrevNextKeyUsingRef(p,R,!0,u),n.getPrevNextKeyUsingRef(p,R,!1,u),R,(e=>{k(e.value),A(!1)})),w={onKeyDown:e=>{if(p.current&&R){if("Home"===e.key||"End"===e.key){const t=Array.from(p.current.querySelectorAll(u),(e=>n.getKey(e)));e.preventDefault(),k?.(t["Home"===e.key?0:t.length-1])}if("Enter"!==e.key&&" "!==e.key||(e.preventDefault(),v?.({value:R})),"Delete"===e.key){n.findElementByKey(p.current,R,u).hasAttribute(i)&&b?.({value:R})}"Escape"===e.key&&A(!0)}},onFocus:()=>{if(p.current&&void 0===R){const e=n.getFirstVisibleKey(p.current,u);e&&k(e)}}};return{rootProps:r.mergeProps({"aria-activedescendant":R?E+R:"","aria-multiselectable":!1,class:y,ref:p,role:"tablist",tabIndex:0},F,C,w),tabBarContext:{currentKey:R,display:d,isEdgeBottom:"bottom"===g,layout:"condense",onRemove:b,onSelect:v,showFocusRing:S,hideTooltip:x,selection:m,size:K,tabItemPrefix:E}}}}));
//# sourceMappingURL=useTabBar-b6291bfe.js.map
