define(['exports', 'preact/jsx-runtime', './useUser-03bad59a', 'preact', './UNSAFE_Chart/themes/ChartStyles.css', './classNames-902bc74c', './layoutUtils-fa012ea3', './useTranslationBundle-a17e0551', './dataStyleUtils-e81e65b5', './accUtils-c6181728', './Chart-4e772761', './colorUtils-4c312b6d'], (function(e,t,r,i,s,n,o,a,d,l,c,u){"use strict";const I=2,g=.25;function h(e,t,r,i,s,n,o){const a=n?1:i,d=I*s,l=(t*(1-r)-(a-1)*d)/a;if(n)return{barWidth:l,offset:-1*l/2,itemsGaps:d};const c=t/2,u=t*(r/2)+e*(l+I*s);return{barWidth:l,offset:o?c-u-l:u-c,itemsGaps:d}}const f=1.5,x=2.5;function m(e){return e.isSelected||e.isFocused?t.jsx(p,{...e}):t.jsx("rect",{x:e.x,y:e.y,"data-oj-series-index":e.seriesIndex,"data-oj-group-index":e.groupIndex,"data-oj-object":"bar","aria-label":e["aria-label"],role:e["aria-label"]?"img":void 0,id:e.activeId,style:{width:e.width,height:e.height,fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth},class:n.classNames([e.isPointerEnabled?s.styles.cursorEnable:void 0,e.isDimmed?s.styles.dimmed:void 0])})}function p(e){const{x:r,y:i,width:o,height:a,fill:d,isSelected:l,isFocused:c}=e,u=l?x:f;return t.jsxs("g",{id:e.activeId,"data-oj-object":"bar","data-oj-series-index":e.seriesIndex,"data-oj-group-index":e.groupIndex,className:e.isDimmed?s.styles.dimmed:"",role:e["aria-label"]?"img":void 0,"aria-label":e["aria-label"],children:[t.jsx("rect",{x:r,y:i,class:n.classNames([l?s.styles.selectedBorder:""]),style:{width:o,height:a,fill:!l&&c?d:void 0}}),t.jsx("rect",{x:r+u,y:i+u,class:n.classNames([s.styles.contrastBorder,e.isPointerEnabled?s.styles.cursorEnable:void 0]),style:{width:o-2*u,height:a-2*u,fill:d}})]})}function b(e,t,r){return{fill:e.color||t.color||r,stroke:e.borderColor||t.borderColor}}function v(e,t,r,i,s){let n,o,a,d,l=e,c=t,u=t-e;return u<1&&(l=Math.floor(l),c=l+1,u=1),s?(o=l,n=r>i?i:r,a=Math.abs(i-r),d=Math.abs(c-l)):(n=l,o=r>i?i:r,a=Math.abs(c-l),d=Math.abs(i-r)),{x:n,y:o,width:a,height:d}}function y(e,t,r,i,s,n,o){let a,d;return r?(a=t.transform(e<0?n:o),n+=e<0?e:0,o+=e>0?e:0,d=t.transform(e<0?n:o),a+=d>a?s:-s):(a=i?t.range()[0]:t.transform(0),d=t.transform(e)),{baselineCoord:a,endCoord:d}}function S(e,t,r,i,s,n,o){const{baselineCoord:a,endCoord:d}=y(e,t,r,i,s,n,o);return(a+d)/2}function w({yScale:e,xScale:r,colors:s,series:n,groupIndex:c,hiddenIds:u,barGapRatio:I,dataItemGaps:g,groupWidth:f,highlightedIds:x,selectedIds:p,orientation:S,isLog:w,activeId:C,getDataItem:j,isRtl:A,isStacked:G,isSelectionEnabled:D,focusedItemInfo:N,hoveredItemInfo:k,isDrillEnabled:E,group:R,timeAxisType:W}){const M="horizontal"===S,F=[],P=n.length;let U=w?e.domain()[0]:0,B=0;const T=a.useTranslationBundle("@oracle/oraclejet-preact");for(let t=0;t<P;t+=1){const a=j(t,c);if(!a||u?.has(a.id)||w&&a.value<=0)continue;const S=o.getGroupCenterCoord(R,c,r,a,W),L=N?.groupIndex===c&&N?.seriesIndex===t&&N?.isFocusVisible,z=k?.groupIndex===c&&k?.seriesIndex===t&&k?.isCurrent,$=!!L||!!z&&D,q=L&&N.isCurrent||z,V=void 0===x||x.has(a.id),_=!!p?.has(a.id),H="on"===a.drilling||"off"!=a.drilling&&E,{barWidth:J,offset:K,itemsGaps:O}=h(t,f,I,P,g,G,A),Q=S+K,X=Q+J,{baselineCoord:Y,endCoord:Z}=y(a.value,e,G,w,O,B,U);B+=a.value<0?a.value:0,U+=a.value>0?a.value:0;const ee=b(a,n[t],s?.[t]),te=v(Q,X,Z,Y,M),re=l.supportsMobileScreenReader||q?d.getItemAriaLabel(T,n[t].name||n[t].id.toString(),R.name||R.id,a.value,D,_,H,a.accessibleLabel):"";F.push(i.createElement(m,{...te,...ee,seriesIndex:t,groupIndex:c,isFocused:$,activeId:q?C:"","aria-label":re,isDimmed:!V,isSelected:_,isPointerEnabled:H||D,key:`${c};${t}`}))}return t.jsx(t.Fragment,{children:F})}function C(e,t,r,i){const s=d.getNextItemInGroup(e,r,i);if(s)return s;if(e.groupIndex<t){let s={seriesIndex:0,groupIndex:e.groupIndex+1};if(i(s.seriesIndex,s.groupIndex))return s;if(s=C(s,t,r,i),s)return s}return e}function j(e,t,r,i){const s=d.getPrevItemInGroup(e,i);if(s)return s;if(e.groupIndex>t){let s={groupIndex:e.groupIndex-1,seriesIndex:r-1};if(i(s.seriesIndex,s.groupIndex))return s;if(s=j(s,t,r,i),s)return s}return e}e.BarChart=function({width:e="100%",height:i="448px",selectedIds:s=[],hiddenIds:n=[],highlightedIds:a,hideAndShowBehavior:l="none",orientation:I="vertical",yAxis:f,series:x,groups:m,isStacked:p=!1,getDataItem:b,selectionMode:A="none",drilling:G="off",dataItemGaps:D=.5,...N}){const{direction:k}=r.useUser(),E="rtl"===k,R=new Set(n),W="horizontal"===I,M=N.xAxis?.timeAxisType,F=new Set(s),P=new Set(a),U=u.getColorRamp();return t.jsx(c.Chart,{width:e,height:i,selectedIds:s,hiddenIds:n,hideAndShowBehavior:l,orientation:I,yAxis:f,series:x,groups:m,isStacked:p,getDataItem:b,selectionMode:A,drilling:G,renderGridLinesInFront:!1,findNearest:(e,t,r,i)=>{const s=function(e,t,r,i,s,n){return o=>{const{offset:a,barWidth:d}=h(o,e,t,r,i,s,n);return{offset:a,dataWidth:d}}}(r,i,x.length,D,p,E);return o.findNearestDataPoint(x,m,e,t,b,p,s,S,"log"===f?.scale,D,R,M)},getDataItemPos:(e,t,r,i)=>function(e,t,r,i,s,n,o,a,d,l,c,u,I,g){return(f,x)=>{const m=e.length;let p=0,b=0;for(let e=0;e<m;e+=1){const S=r(e,x);let w=x;if(g){const e="mixedFrequency"===g?r(f,x)?.x:t[x].id;w=new Date(e).getTime()}if(!S||n?.has(S.id)||l&&S.value<=0)continue;const C=i.transform(w),{barWidth:j,offset:A,itemsGaps:G}=h(e,a,d,m,o,c,u),D=C+A,N=D+j,{baselineCoord:k,endCoord:E}=y(S.value,s,c,l,G,b,p);if(b+=S.value<0?S.value:0,p+=S.value>0?S.value:0,f===e)return v(D,N,E,k,I)}}}(x,m,b,e,t,R,D,r,i,"log"===f?.scale,p,E,W,M),getNavUtil:(e,t)=>function(e,t,r,i,s,n){const o=(t,r)=>{const i=e(t,r);return Boolean(i)};return(e,a)=>{if(!s&&("ArrowDown"===a||"ArrowUp"===a))return e;let l;const c={groupIndex:e.groupIndex,seriesIndex:e.seriesIndex};return c.groupIndex<r?(c.groupIndex=r,c):c.groupIndex>i?(c.groupIndex=i,c):(s?l="ArrowLeft"===a?n?d.getNextItemInSeries(c,i,o):d.getPrevItemInSeries(c,r,o):"ArrowRight"===a?n?d.getPrevItemInSeries(c,r,o):d.getNextItemInSeries(c,i,o):"ArrowDown"===a?d.getPrevItemInGroup(c,o):d.getNextItemInGroup(c,t,o):"ArrowRight"===a?l=n?j(c,r,t,o):C(c,i,t,o):"ArrowLeft"===a&&(l=n?C(c,i,t,o):j(c,r,t,o)),l||c)}}(b,x.length,e,t,p,E),getGapRatio:(e,t)=>function(e,t,r){return e?.37+.26/(r-t+1):g}(p,e,t),getMarkerInfo:(e,t)=>({color:d.getItemColor(e,t,x,b),type:d.getMarkerType(e,t,"bar",b)}),isRtl:E,offset:.5,...N,children:({xStartIndex:e,xEndIndex:r,xScale:i,yScale:s,gapRatio:n,activeId:o,focusedItemInfo:d,hoveredItemInfo:l,groupWidth:c})=>t.jsx(t.Fragment,{children:m.slice(e,r+1).map(((r,u)=>t.jsx(w,{yScale:s,xScale:i,groupIndex:u+e,selectedIds:F,hiddenIds:R,highlightedIds:a?P:a,isDrillEnabled:"on"===G,series:x,barGapRatio:n,dataItemGaps:D,isStacked:p,groupWidth:c,group:m[u],timeAxisType:N.xAxis?.timeAxisType,colors:U,activeId:o,isLog:"log"===f?.scale,orientation:I,getDataItem:b,isSelectionEnabled:"none"!=A,isRtl:E,focusedItemInfo:d,hoveredItemInfo:l})))})})}}));
//# sourceMappingURL=BarChart-8d3c8dd3.js.map
