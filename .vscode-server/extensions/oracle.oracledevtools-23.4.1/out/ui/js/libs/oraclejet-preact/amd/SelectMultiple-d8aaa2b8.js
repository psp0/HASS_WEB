define(['exports', 'preact/jsx-runtime', 'preact', 'preact/compat', './Label-68daef9a', 'preact/hooks', './TextFieldInput-7f1f701c', 'css!./ObfuscatedTextFieldInputStyles.styles.css', './ReadonlyTextFieldInput-8ed621a5', './StyledTextField-7abcabc0', './Flex-f2984cda', './FormContext-f3d7d458', './useFormContext-bf875ce1', './FormFieldContext-0bd82107', 'css!./LabelValueLayoutStyles.styles.css', './logger-2fbed0e0', 'css!./SkeletonStyles.styles.css', 'css!./TextFieldLoadingStyles.styles.css', 'css!./TextFieldStyles.styles.css', 'module', './UNSAFE_TextField/themes/redwood/TextFieldVariants.css', 'css!./RadioStyles.styles.css', 'module', './UNSAFE_RadioItem/themes/redwood/RadioVariants.css', 'css!./LabelStyles.styles.css', 'module', './UNSAFE_Label/themes/redwood/LabelVariants.css', './UNSAFE_TextField/themes/FormLayoutStyles.css', 'module', 'css!./CheckboxStyles.styles.css', 'module', './UNSAFE_Checkbox/themes/redwood/CheckboxVariants.css', './InputGroupContext-4122dbd2', './TopLayerHost-1134809b', './useTranslationBundle-a17e0551', 'css!./LiveRegionStyles.styles.css', './TabbableModeContext-1e10fda7', 'css!./UserAssistanceStyles.styles.css', 'module', './UNSAFE_UserAssistance/themes/redwood/UserAssistanceVariants.css', './InlineUserAssistance-6eea8507', './CompactUserAssistance-bffb11b8', './Floating-3a873bc7', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', 'css!./IconStyle.styles.css', './Popup-6ccb1318', 'css!./HiddenAccessibleStyles.styles.css', 'module', './UNSAFE_Popup/themes/redwood/PopupVariants.css', './useFocusableTextField-3da26e05', './useLoadingIndicatorTimer-6f59ca24', './useTextField-ab6a48a5', './useSelectCommon-d3c8b3af', './useAccessibleContext-43a3cb41', './textAlign-27feda7f', './useFormFieldContext-db150c3c', 'css!./ReadonlyTextFieldInputStyles.styles.css', './UNSAFE_TextField/themes/redwood/ReadonlyTextFieldInputVariants.css', './TextField-43458873', './UNSAFE_SelectMultiple/themes/SelectedValuesCountStyles.css', './Chip-b4e5da9d', './IconButton-0d891953', './CancelS-d60443ad', './useFocusWithin-3a309bee', './useUser-03bad59a', './keyboardUtils-1ede242c', './classNames-902bc74c', './dimensions-f9da1099', './mergeInterpolations-2c5b5a03', './HiddenAccessible-8ed7ffcd', './Text-24f845b9', './Close-1d826232', './useId-93f47e0a', './UNSAFE_SelectMultiple/themes/TextTagStyles.css', './UNSAFE_SelectMultiple/themes/TextTagListStyles.css', './LiveRegion-a66ead79', './View-f608b1c8', './UNSAFE_SelectMultiple/themes/MobileDropdownFooterStyles.css', './Button-88a77e0e', './equals-32544366', './mergeProps-31f70810', './stringUtils-15d0b4ab'], (function(e,s,t,o,n,i,a,l,r,d,c,u,p,h,y,b,m,x,S,f,w,v,T,g,F,C,D,A,L,R,I,k,E,V,K,U,j,B,P,M,O,N,_,H,z,q,Y,W,$,G,Z,J,Q,X,ee,se,te,oe,ne,ie,ae,le,re,de,ce,ue,pe,he,ye,be,me,xe,Se,fe,we,ve,Te,ge,Fe,Ce,De,Ae,Le,Re){"use strict";function Ie({assistiveText:e,currentKey:t,data:o,dropdownId:n,dropdownRef:i,helpSourceLink:a,helpSourceText:l,isAddToListShown:r,isDisabled:d,isDropdownAbove:c,isEmptyResults:u,isOpen:p,isReadonly:h,isSelectedOnlyView:y,isUserFiltering:b,itemRenderer:m,itemText:x,label:S,mainFieldRef:f,searchText:w,selectedKeys:v,userAssistanceDensity:T,onAddToListAction:g,onAutoDismiss:F,onCurrentKeyChange:C,onLoadRange:D,onPosition:A,onSelectionChange:L}){const R=K.useTranslationBundle("@oracle/oraclejet-preact"),I=!p||c||d||h||!e&&!a||"efficient"!==T&&"reflow"!==T?void 0:s.jsx(ee.DropdownUserAssistance,{assistiveText:e,fieldLabel:S,helpSourceLink:a,helpSourceText:l,userAssistanceDensity:T}),k=u?r?void 0:s.jsx(ee.EmptyResults,{}):s.jsx(ee.DefaultList,{"aria-label":S??"",currentItemVariant:"highlight",currentKey:t,data:o,itemRenderer:m,itemText:x,searchText:y?void 0:b?w:void 0,selectedKeys:v,selectionMode:"multiple",onCurrentKeyChange:C,onLoadRange:D,onSelectionChange:L}),E=r?s.jsx(ee.LinkItem,{isHighlighted:u,onAction:g,children:R.select_addToList()}):void 0;return s.jsxs(ee.Dropdown,{dropdownRef:i,id:n,isOpen:p,anchorRef:f,onAutoDismiss:F,onPosition:A,children:[s.jsxs(ee.DropdownList,{hasBottomGap:void 0===I,isLoading:null===o,children:[k,E]}),I]})}function ke({"aria-label":e,count:t=0,onKeyDown:o,onKeyUp:n,onMouseDown:i,...a}){const l=K.useTranslationBundle("@oracle/oraclejet-preact"),r=l.selectMultiple_showSelectedValues(),d=e?`${e}. `:"",c=l.selectMultiple_countPlus({COUNT:"99"}),u=t>99?`${c}`:`${t}`,p=`${d}${l.selectMultiple_valuesSelected({VALUE_COUNT:`${t}`})} ${r}`;return s.jsx("div",{class:le.selectedValueCountStyles.base,onKeyDown:o,onKeyUp:n,onMouseDown:i,children:s.jsx(re.Chip,{"aria-label":p,...a,children:u})})}function Ee({children:e,columnSpan:t,fieldLabel:o,hasInsideLabel:n,isBackButtonShown:i,isClearButtonShown:a,isDropdownArrowShown:l,isDropdownSelectedOnlyView:r,isSelectedValuesCountShown:d,selectedValuesCount:u,onBackButtonClick:p,onClearButtonClick:h,onDropdownArrowClick:y,onSelectedValuesCountKeyDown:b,onSelectedValuesCountKeyUp:m,onSelectedValuesCountMouseDown:x,onSelectedValuesCountToggle:S,...f}){const{isDisabled:w,isLoading:v}=oe.useFormFieldContext(),T=K.useTranslationBundle("@oracle/oraclejet-preact"),g=i?s.jsx(de.IconButton,{"aria-label":T.selectMultiple_back(),variant:"borderless",onAction:p,children:s.jsx(ce.SvgNavLeft,{})}):null,F=a?s.jsx(de.IconButton,{"aria-label":T.formControl_clear(),size:n?"md":"sm",variant:"borderless",onAction:h,children:s.jsx(ce.SvgCancelS,{})}):null,C=l?s.jsx(ee.DropdownArrow,{isDisabled:w,size:n?"md":"sm",onClick:y}):null,D=v?void 0:d?s.jsxs(c.Flex,{align:"center",justify:"center",gap:[0,"1x"],children:[s.jsx(ke,{"aria-label":o,count:u,isDisabled:w,isSelected:r,onKeyDown:b,onKeyUp:m,onMouseDown:x,onToggle:S}),a&&F,l&&C]}):s.jsxs(s.Fragment,{children:[a&&F,l&&C]});return s.jsx(ae.TextField,{columnSpan:t,startContent:i&&g,mainContent:e,endContent:D,...f})}function Ve({children:e,removeIcon:t="never",isSelected:o=!1,onRemoveAction:n,onSelect:a,onRemoveIconClick:l,isFocused:r,value:d}){const c=K.useTranslationBundle("@oracle/oraclejet-preact"),u=i.useRef(null),p=we.useId(),h=ye.classNames([ve.textTagStyles.base,o&&ve.textTagStyles.selected]),y=i.useCallback((()=>{n?.(d)}),[d,n]),b=i.useCallback((()=>{a?.(d)}),[d,a]),m=i.useCallback((()=>{l?.(d)}),[d,l]),x=i.useCallback((e=>{he.isBackspaceOrDelete(e)&&y()}),[y]);return i.useEffect((()=>{r&&o&&(u.current?.focus(),u.current?.scrollIntoView({block:"nearest"}))}),[r,o]),s.jsxs(s.Fragment,{children:[s.jsxs("span",{ref:u,class:h,tabIndex:-1,onClick:b,onKeyUp:x,onMouseDown:ee.preventDefault,role:"option","aria-describedby":p,"aria-selected":o?"true":"false",children:[s.jsx(Se.Text,{size:"md",variant:"inherit",children:e}),"always"===t&&s.jsx(j.TabbableModeContext.Provider,{value:{isTabbable:!1},children:s.jsx(de.IconButton,{size:"xs",variant:"ghost",onAction:m,children:s.jsx(fe.SvgClose,{})})})]}),s.jsx(xe.HiddenAccessible,{id:p,children:c.selectMultiple_removeSelectedTagInstructionText()})]})}const Ke=Array.from(["maxWidth"],(e=>be.dimensionInterpolations[e])),Ue=me.mergeInterpolations(Ke);const je=o.forwardRef((function(e,t=(()=>{})){const{"aria-label":o,data:n,hasInsideLabel:a=!1,removeIcon:l="never",onExitNavigation:r,onRemove:d}=e,c=i.useRef(null),[u,p]=i.useState([]),{direction:h}=pe.useUser(),y=i.useRef(-1),b=n.at(-1)?.value,m=i.useRef({value:b,index:n.length-1});m.current={value:b,index:n.length-1};const x=i.useCallback((e=>{const s=n.at(e)?.value;null!=s&&p([s])}),[n]),S=i.useCallback((()=>{p((e=>(y.current=-1,e.length?[]:e)))}),[]),f=i.useCallback((e=>{d?.([e]),r?.(),S()}),[S,r,d]),w=i.useCallback((e=>{const s=[...u];u.includes(e)||s.push(e),d?.(s),r?.(),S()}),[u,S,r,d]),v=i.useCallback((e=>{p([e]),y.current=n.findIndex((s=>s.value===e))}),[n,p]),T=i.useCallback((e=>{if(0!==n.length){if("ltr"===h&&"ArrowLeft"===e.code||"rtl"===h&&"ArrowRight"===e.code){if(0===y.current)return;return y.current-=1,void x(y.current)}return"ltr"===h&&"ArrowRight"===e.code||"rtl"===h&&"ArrowLeft"===e.code?y.current===n.length-1?void r?.():(y.current+=1,void x(y.current)):"Home"===e.code?(y.current=0,void x(y.current)):"End"===e.code?(y.current=n.length-1,void x(y.current)):he.isSelectAll(e)?(p(n.map((e=>e.value))),void e.preventDefault()):void 0}}),[n,h,r,x,p]),g=i.useCallback((()=>{p((e=>e.length||void 0===m.current.value?e:(y.current=m.current.index,[m.current.value])))}),[]),F=i.useCallback((()=>{S()}),[S]),{focusProps:C}=ue.useFocusWithin({onBlurWithin:F});i.useImperativeHandle(t,(()=>({blur:F,focus:g})),[F,g]),i.useEffect((()=>{c.current?.scrollTo({left:c.current.scrollWidth*("ltr"===h?1:-1)})}),[n,h]);const D=Ue(e),A=ye.classNames([Te.textTagListStyles.textTagListBase,a&&Te.textTagListStyles.textTagListInsideLabel]);return s.jsx("div",{class:A,ref:c,tabIndex:-1,onKeyDown:T,role:"listbox","aria-label":o,"aria-multiselectable":"true",style:D,...C,children:n.map(((e,t)=>s.jsx(Ve,{isFocused:y.current===t,isSelected:u.includes(e.value),onRemoveAction:w,onSelect:v,onRemoveIconClick:f,removeIcon:l,value:e.value,children:e.label},e.value)))})}));function Be({displayValue:e,isAddToListShown:t,isKeyboardNavigable:o,isTextTagListShown:n,isUserFiltering:l,liveRegionText:r,onExitNavigation:d,onRemove:u,removeIcon:p,selectedValuesDescriptionId:h,selectedValuesKeyboardNavDescriptionId:y,textTagListData:b,textTagListRef:m,userInput:x,virtualKeyboard:S,...f}){const w=K.useTranslationBundle("@oracle/oraclejet-preact"),v=t?w.select_addToListAvailable():void 0,T=o&&e&&e.length>0?w.selectMultiple_highlightSelectedTagsInstructionText():void 0,{isInputFocused:g}=oe.useFormFieldContext(),[F,C]=i.useState(T),[D,A]=i.useState(!1);return g&&n&&!F&&T&&!D?A(!0):g||!D||A(!1),F!==T&&C(T),s.jsxs(s.Fragment,{children:[n&&s.jsx(je,{"aria-label":w.selectMultiple_selectedValues(),data:b,hasInsideLabel:f.hasInsideLabel,maxWidth:"50%",onExitNavigation:d,onRemove:u,ref:m,removeIcon:p}),s.jsx(c.Flex,{flex:1,children:s.jsx(a.TextFieldInput,{"aria-autocomplete":"list",autoComplete:"off",hasPrefix:n,role:"combobox",spellcheck:!1,type:"auto"===S?"search":S,value:l||n?x:e,...f})}),n&&s.jsx(xe.HiddenAccessible,{id:h,isHidden:!0,children:e}),n&&T&&!D&&s.jsx(xe.HiddenAccessible,{id:y,isHidden:!0,children:T}),s.jsx(ge.LiveRegion,{children:r}),n&&s.jsx(ge.LiveRegion,{children:D?T:void 0}),t?s.jsx(ge.LiveRegion,{children:v}):void 0]})}function Pe({onApply:e}){const t=K.useTranslationBundle("@oracle/oraclejet-preact");return s.jsx("div",{class:Ce.mobileDropdownFooterStyles.base,children:s.jsx(De.Button,{display:"label",edge:"bottom",label:t.selectMultiple_apply(),size:"sm",variant:"callToAction",onAction:e})})}function Me(e,s){const t=K.useTranslationBundle("@oracle/oraclejet-preact").plural_separator();return{displayValue:i.useMemo((()=>{if(void 0===s)return"";const o=function(e,s){const t=s?[...s?.values()]:[],o=s=>ee.renderItemText(s,e),n=t.map(o);return new Set(n)}(e,s),n=function(e,s){return Array.from(e.values()).join(s)}(o,t);return n}),[e,t,s]),textTags:i.useMemo((()=>void 0===s?[]:function(e,s=[]){return s.map((s=>({label:ee.renderItemText(s,e)??"",value:s.key})))}(e,s)),[e,s])}}function Oe({isDropdownSelectedOnlyView:e,valueItems:s}){const t=i.useRef(s),o=i.useRef(e);t.current=o.current!==e?s:t.current,o.current=e;return{data:i.useMemo((()=>e&&t.current&&0!==t.current.length?{offset:0,totalSize:t.current.length??0,sizePrecision:"exact",data:t.current.map((e=>({data:e.data,metadata:e.metadata??{key:e.key}})))}:void 0),[e]),onLoadRange:void 0}}const Ne=[];const _e=(e,s,t)=>s.data.forEach((s=>{t.has(s.metadata.key)&&e.set(s.metadata.key,{data:s.data,key:s.metadata.key,metadata:s.metadata})})),He=e=>new Set(e.map((e=>e.key)));function ze({"aria-describedby":e,"aria-label":t,assistiveText:o,data:a,dropdownId:l,enabledElementRef:r,helpSourceLink:d,helpSourceText:c,isAddToListShown:u,isDisabled:p,isEmptyResults:y,isFocused:b,isLoading:m,isOpen:x,isReadonly:S,isRequired:f,isSelectedOnlyView:w,isUserFiltering:v,itemRenderer:T,itemText:g,label:F,liveRegionText:C,placeholder:D,propIsLoading:A,searchText:L,selectedValuesDescriptionId:R,setDropdownOpen:I,setUserInput:k,stopFiltering:E,textAlign:V,textTagListRef:U,userAssistanceDensity:j,userInput:B,valueItems:P,virtualKeyboard:M,onAddToListAction:O,onCommit:N,onFieldBlur:_,onFieldFocus:H,onFieldInput:z,onFieldKeyDown:q,onFieldKeyUp:Y,onLoadRange:W,onSelectedValuesCountKeyDown:$,onSelectedValuesCountKeyUp:G,onSelectedValuesCountMouseDown:Z,onSelectedValuesCountToggle:J}){const Q=K.useTranslationBundle("@oracle/oraclejet-preact"),{collectionProps:se,footerProps:te,selectMultipleFieldInputProps:oe,selectMultipleFieldProps:ne}=function({data:e,inputRef:s,isDropdownOpen:t,isDropdownSelectedOnlyView:o,itemText:n,textTagListRef:a,userInput:l,valueItems:r=Ne,onCommit:d,onLoadRange:c,setDropdownOpen:u,setUserInput:p,stopFiltering:h}){const[y,b]=i.useState({rowKey:void 0}),[m,x]=i.useState(He(r)),S=i.useRef(new Map),f=i.useMemo((()=>{const e=[];return m.forEach((s=>{const t=r.find((e=>e.key===s));t?e.push(t):S.current.has(s)&&e.push(S.current.get(s))})),e}),[m,r]),{textTags:w,displayValue:v}=Me(n,f),T=i.useRef(null),{data:g,onLoadRange:F}=Oe({isDropdownSelectedOnlyView:o,valueItems:f}),C=i.useCallback((e=>{b({rowKey:e.value})}),[b]),D=i.useCallback((s=>{const t=new Set(s.value.keys?.values());x(t),p(""),e&&_e(S.current,e,t)}),[e,x,p]),A=i.useCallback((()=>{x(new Set(r.map((e=>e.key)))),S.current.clear(),u(!1),h(),s.current?.focus()}),[s,u,h,r]),L=i.useCallback((()=>{d({previousValue:He(r),value:m}),A()}),[m,r,A,d]),R=i.useCallback((()=>{A()}),[A]),I=i.useCallback((()=>{x(new Set),h()}),[h]),k=i.useCallback((e=>{const s=new Set(m);e.forEach((e=>s.delete(e))),x(s)}),[m]),E=i.useCallback((()=>{setTimeout((()=>T.current?.focus()),0)}),[]),V=i.useRef(t);i.useEffect((()=>{if(t){if(V.current)return;return setTimeout((()=>T.current?.focus()),0),void(V.current=!0)}V.current=!1}),[t]);const[K,U]=i.useState(r);return K!==r&&(t||x((e=>{const s=He(r);return Ae.equals(e,s)?e:s})),U(r)),{collectionProps:{currentKey:y.rowKey,data:o?g:e,selectedKeys:m,onCurrentKeyChange:C,onLoadRange:o?F:c,onSelectionChange:D},footerProps:{onApply:L},selectMultipleFieldInputProps:{displayValue:v,hasEmptyLabel:!1,hasInsideLabel:!0,inputRef:T,isTextTagListShown:w.length>0,isUserFiltering:!0,removeIcon:"always",userInput:l,textTagListData:w,textTagListRef:a,onExitNavigation:E,onRemove:k},selectMultipleFieldProps:{hasInsideLabel:!0,isBackButtonShown:!0,isClearButtonShown:!ee.isSearchTextEmptyOrUndefined(l)||0!==w.length,isDropdownArrowShown:!1,isDropdownSelectedOnlyView:o,isSelectedValuesCountShown:m.size>0||o,selectedValuesCount:m.size,styleVariant:"embedded",onBackButtonClick:R,onClearButtonClick:I}}}({data:a,inputRef:r,isDropdownOpen:x,isDropdownSelectedOnlyView:w,itemText:g,textTagListRef:U,userInput:B,valueItems:P,onCommit:N,onLoadRange:W,setDropdownOpen:I,setUserInput:k,stopFiltering:E}),{formFieldContext:ie,inputProps:ae,labelProps:le,textFieldProps:re,userAssistanceProps:de}=X.useTextField({ariaDescribedBy:e,helpSourceLink:d,helpSourceText:c,isDisabled:!1,isFocused:b,isLoading:m,isReadonly:!1,isRequiredShown:!1,labelEdge:"inside",styleVariant:"default",value:ne.selectedValuesCount>0||void 0});ie.hasValue=A||ie.hasValue;const ce={label:s.jsx(n.Label,{...le,children:F}),labelEdge:"inside"},ue=!x||p||S||!o&&!d||"efficient"!==j&&"reflow"!==j?void 0:s.jsx(ee.DropdownUserAssistance,{assistiveText:o,fieldLabel:F,helpSourceLink:d,helpSourceText:c,userAssistanceDensity:j,...de}),pe=y?u?void 0:s.jsx(ee.EmptyResults,{}):s.jsx(ee.DefaultList,{...se,"aria-label":F??"",itemRenderer:T,itemText:g,searchText:w?void 0:v?L:void 0,selectionMode:"multiple"}),he=u?s.jsx(ee.LinkItem,{onAction:O,children:Q.select_addToList()}):void 0;return s.jsx(ee.SelectMobileDropdown,{header:s.jsxs(h.FormFieldContext.Provider,{value:ie,children:[s.jsx(Fe.View,{children:s.jsx(Ee,{fieldLabel:F,onBlur:_,onFocus:H,onSelectedValuesCountKeyDown:$,onSelectedValuesCountKeyUp:G,onSelectedValuesCountMouseDown:Z,onSelectedValuesCountToggle:J,...ce,...re,...ne,children:s.jsx(Be,{"aria-controls":l,"aria-expanded":x,"aria-label":t,isAddToListShown:u,isRequired:f,liveRegionText:C,placeholder:D,selectedValuesDescriptionId:R,textAlign:V,virtualKeyboard:M,onInput:z,onKeyDown:q,onKeyUp:Y,...ae,...oe})})}),ue]}),footer:s.jsx(Pe,{...te}),id:l,isOpen:x,children:s.jsxs(ee.DropdownList,{hasTopGap:!he,hasBottomGap:!0,isLoading:null===a,children:[pe,he]})})}function qe(e){const s=e?.reduce(((e,s)=>(e.add(s.key),e)),new Set);return s}const Ye=o.forwardRef((({addToList:e="off","aria-describedby":o,assistiveText:a,columnSpan:l,data:c,helpSourceLink:u,helpSourceText:y,isDisabled:b,isLoading:m,isReadonly:x,isRequired:S,isRequiredShown:f,itemRenderer:w,itemText:v,label:T,labelEdge:g,labelStartWidth:F,messages:C,onAddToListAction:D,onCommit:A,onFilter:L,onLoadRange:R,placeholder:I,testId:k,textAlign:E,userAssistanceDensity:V,valueItems:U,variant:j="default",virtualKeyboard:B},P)=>{const{isDisabled:M,isReadonly:_,labelEdge:H,labelStartWidth:z,textAlign:q,userAssistanceDensity:Y}=p.useFormContext(),W=b??M,$=x??_,G=g??H,Z=F??z,se=E??q,te=V??Y,{enabledElementRef:oe,focusProps:ne,isFocused:ie,readonlyElementRef:ae}=J.useFocusableTextField({isDisabled:W,isReadonly:$,ref:P}),{addToListEventHandlers:le,ariaProps:re,collectionProps:de,data:ce,dropdownArrowEventHandlers:ue,dropdownEventHandlers:ye,dropdownRef:be,hasSelectedValuesCount:me,inputEventHandlers:xe,isAddToListShown:Se,isDataFetched:fe,isDropdownAbove:ve,isDropdownOpen:Te,isDropdownSelectedOnlyView:ge,isEmptyResults:Fe,isFocused:Ce,isUserFiltering:De,mainFieldRef:Ae,mouseProps:ke,searchText:Ve,selectedValuesCountProps:Ke,selectedValuesDescriptionId:Ue,selectedValuesKeyboardNavDescriptionId:je,setDropdownOpen:Pe,setUserInput:Ne,stopFiltering:_e,textTagListProps:He,userInput:Ye}=function({addToList:e,ariaDescribedBy:s,data:t,inputRef:o,isDisabled:n,isFocused:a,isReadonly:l,onAddToListAction:r,onCommit:d,onFilter:c,onLoadRange:u,valueItems:p}){const[h,y]=i.useState(!1),b=p?.length,m=void 0!==b&&b>0||h,x=Oe({isDropdownSelectedOnlyView:h,valueItems:p}),S=h?x.data:t,f=h?x.onLoadRange:u,w=i.useCallback((e=>{ee.isSearchTextEmptyOrUndefined(e.searchText)||y(!1),c?.(e)}),[c]),{currentRow:v,dropdownRef:T,handleDropdownArrowClick:g,handleDropdownAutoDismiss:F,handleDropdownPosition:C,handleInput:D,handleMainFieldKeyDown:A,handleMainFieldKeyUp:L,handleUpDownArrowKeys:R,isDropdownAbove:I,isDropdownOpen:k,isFocused:E,isUserFiltering:V,mainFieldRef:K,onCurrentKeyChange:U,onMouseDown:j,searchText:B,setCurrentRow:P,setDropdownOpen:M,setUserInput:O,stopFiltering:N,userInput:_}=ee.useSelectCommon({data:S,inputRef:o,isFocused:a,onFilter:w}),[H,z]=i.useState(k),[q,Y]=i.useState(p),[W,$]=i.useState(qe(p)),G=null!=S&&!ee.isBeforeDataFetch(S),Z=G&&0===S?.totalSize,J="on"===e&&V&&null!=B&&B.length>0&&Z,Q=i.useCallback((()=>{M(!1),N(),r?.({searchText:V?B:void 0})}),[V,r,B,M,N]),X=i.useRef(null),{direction:se}=pe.useUser(),te=we.useId(),oe=we.useId(),ne=Re.merge([E&&oe,E&&te,s]),ie=i.useCallback((()=>{T.current?.parentElement?.removeChild(T.current)}),[T]),ae=i.useCallback((e=>V&&k&&!ee.isSearchTextEmptyOrUndefined(_)&&(S?.data.length??0)>0&&void 0!==e.rowKey),[S,k,V,_]),le=i.useCallback((e=>{if(W?.has(e))return;const s=void 0===W?new Set([e]):new Set([...W.values(),e]);d({previousValue:W,value:s}),$(s)}),[d,W,$]),re=i.useCallback((e=>{if(k&&"keydown"===e?.type){const s=e;s.code===he.KEYS.TAB&&(s.shiftKey||!m?o.current?.focus():ce.current?.focus(),ie())}}),[m,o,k,ie]),de=i.useCallback((e=>{if(!he.isControlOrFunctionKey(e))switch(e.code){case he.KEYS.TAB:k&&(e.shiftKey||!m&&!e.shiftKey)&&(ie(),M(!1)),m&&!e.shiftKey&&e.stopPropagation();break;case he.KEYS.LEFT:"ltr"===se&&o.current instanceof HTMLInputElement&&0===o.current?.selectionStart&&0===o.current?.selectionEnd&&X.current?.focus();break;case he.KEYS.RIGHT:"rtl"===se&&o.current instanceof HTMLInputElement&&0===o.current?.selectionStart&&0===o.current?.selectionEnd&&X.current?.focus();break;case he.KEYS.ENTER:case he.KEYS.NUMPAD_ENTER:if(ee.isPhone())return;if(J)return void Q();ae(v)&&(M(!1),N(),le(v.rowKey))}}),[v,se,Q,m,o,J,k,ie,le,M,ae,N]);if(q!==p){const e=qe(p);$(e)}const ce=i.useRef(null);i.useEffect((()=>{ce.current=m&&K.current?.querySelector?K.current.querySelector('[role="switch"]'):null}),[m,n,l,K]);const ue=i.useCallback((e=>{switch(e.code){case he.KEYS.TAB:k&&!e.shiftKey&&(ie(),M(!1)),e.shiftKey&&e.stopPropagation();break;case he.KEYS.UP:case he.KEYS.DOWN:e.preventDefault();break;case he.KEYS.ESC:k&&(M(!1),e.preventDefault(),e.stopPropagation());break;case he.KEYS.ENTER:e.stopPropagation()}}),[k,ie,M]),ye=i.useCallback((e=>{switch(e.code){case he.KEYS.UP:case he.KEYS.DOWN:R(e)}}),[R]),be=i.useCallback((e=>{e.preventDefault(),o.current?.focus()}),[o]),me=i.useCallback((e=>{k||M(!0);const s=e.value??!1;s!==h&&(y(s),s&&N())}),[k,h,M,N]);!k&&h&&y(!1);const xe=i.useCallback((e=>{const s=new Set(e.value.keys?.values());$(s),O(""),d?.({value:s,previousValue:W})}),[d,W,$,O]),Se=i.useCallback((()=>{setTimeout((()=>o.current?.focus()),0)}),[o]),fe=i.useCallback((e=>{const s=W,t=new Set(W);e.forEach((e=>t.delete(e))),d?.({previousValue:s,value:t})}),[d,W]),ve=i.useMemo((()=>Le.mergeProps({onAutoDismiss:F,onPosition:C},{onAutoDismiss:re})),[F,C,re]),Te=i.useMemo((()=>Le.mergeProps({onInput:D,onKeyDown:A,onKeyUp:L},{onKeyDown:de})),[A,D,L,de]),ge=i.useMemo((()=>({textTagListRef:X,onExitNavigation:Se,onRemove:fe})),[Se,fe]);k&&!H&&P({rowKey:void 0});const[Fe,Ce]=i.useState(S);if(Fe!==S){const e=S?.data[0]?.metadata.key;k&&V&&null!=e&&0===S?.offset&&P({rowKey:ee.isSearchTextEmptyOrUndefined(B)?void 0:e}),Ce(S)}return H!==k&&z(k),q!==p&&Y(p),{addToListEventHandlers:{onAction:Q},ariaProps:{ariaDescribedBy:ne},collectionProps:{currentKey:v.rowKey,data:S,onCurrentKeyChange:U,onSelectionChange:xe,onLoadRange:f,selectedKeys:W},data:S,dropdownArrowEventHandlers:{onClick:g},dropdownEventHandlers:ve,dropdownRef:T,hasSelectedValuesCount:m,inputEventHandlers:Te,inputRef:o,isAddToListShown:J,isDataFetched:G,isDropdownAbove:I,isDropdownOpen:k,isDropdownSelectedOnlyView:h,isEmptyResults:Z,isFocused:E,isUserFiltering:V,mainFieldRef:K,mouseProps:n||l?{}:{onMouseDown:j},searchText:B,selectedValuesCountProps:{onKeyDown:ue,onKeyUp:ye,onMouseDown:be,onToggle:me},selectedValuesDescriptionId:te,selectedValuesKeyboardNavDescriptionId:oe,setDropdownOpen:M,setUserInput:O,stopFiltering:N,textTagListProps:ge,userInput:_}}({addToList:e,ariaDescribedBy:o,data:c,inputRef:oe,isDisabled:W,isFocused:ie,isReadonly:$,onAddToListAction:D,onCommit:A,onFilter:L,onLoadRange:R,valueItems:U}),We=Q.useLoadingIndicatorTimer(m??!1),{baseId:$e,formFieldContext:Ge,inputProps:Ze,labelProps:Je,textFieldProps:Qe,userAssistanceProps:Xe}=X.useTextField({ariaDescribedBy:re.ariaDescribedBy,helpSourceLink:u,helpSourceText:y,isDisabled:W,isFocused:Ce,isLoading:We,isReadonly:$,isRequiredShown:f,labelEdge:G,messages:C,styleVariant:j,userAssistanceDensity:te,value:void 0!==U&&U.length>0||void 0});Ge.hasValue=m||Ge.hasValue;const es=`${$e}-dropdown`,{displayValue:ss,textTags:ts}=Me(v,U),os="none"!==G?s.jsx(n.Label,{...Je,...ee.isPhone()?{forId:void 0}:{},children:T}):void 0,ns={label:"none"!==G?os:void 0,labelEdge:"none"!==G?G:void 0,labelStartWidth:"none"!==G?Z:void 0},is="none"===G?T:void 0,as="efficient"===te||"reflow"===te?W||$?"efficient"!==te?void 0:s.jsx(O.InlineUserAssistance,{userAssistanceDensity:te,...Xe}):s.jsx(O.InlineUserAssistance,{assistiveText:a,fieldLabel:T,helpSourceLink:u,helpSourceText:y,messages:C,isRequiredShown:f,userAssistanceDensity:te,...Xe}):void 0,ls="compact"===te?s.jsx(N.CompactUserAssistance,{anchorRef:Ae,messages:C,assistiveText:a,...Xe}):void 0,rs=K.useTranslationBundle("@oracle/oraclejet-preact");if($){const e=s.jsx(r.ReadonlyTextFieldInput,{"aria-describedby":Ze["aria-describedby"],"aria-label":is,"aria-labelledby":Je.id,as:"div",elementRef:ae,hasEmptyLabel:""===T&&"none"===G,hasInsideLabel:void 0!==T&&"inside"===G,textAlign:se,value:ss});return s.jsx(h.FormFieldContext.Provider,{value:Ge,children:s.jsx(d.ReadonlyTextField,{role:"presentation",columnSpan:l,compactUserAssistance:ls,inlineUserAssistance:as,onBlur:ne.onfocusout,onFocus:ne.onfocusin,ref:Ae,mainContent:e,testId:k,...ns})})}const ds="inside"===G,cs=Te&&fe?0===ce?.totalSize?rs.select_noMatchesFound():1===ce?.totalSize?rs.select_oneMatchFound():"exact"===ce?.sizePrecision?rs.select_sizeMatchesFound({TOTAL_SIZE:`${ce?.totalSize}`}):rs.select_sizeOrMoreMatchesFound({TOTAL_SIZE:`${ce?.totalSize}`}):"",us=Te&&void 0!==ce&&(null===ce||ce.totalSize>0||ee.isBeforeDataFetch(ce)||Fe),ps=""===T&&"none"===G,hs=ee.isPhone()&&!W?s.jsx(ee.SelectMobileFieldInput,{"aria-controls":es,"aria-describedby":Ze["aria-describedby"],"aria-expanded":Te,"aria-invalid":Ze["aria-invalid"],"aria-label":is,"aria-labelledby":Je.id,displayValue:ss,hasEmptyLabel:ps,hasInsideLabel:ds,isRequired:S,onBlur:Ze.onBlur,onFocus:Ze.onFocus,placeholder:I,ref:oe,textAlign:se,variant:Ze.variant}):s.jsx(Be,{"aria-controls":es,"aria-expanded":Te,"aria-label":is,displayValue:ss,hasEmptyLabel:ps,hasInsideLabel:ds,inputRef:oe,isAddToListShown:Se,isKeyboardNavigable:!W&&!ee.isMobile(),isRequired:S,isTextTagListShown:Ce&&0!==ts.length,isUserFiltering:De,liveRegionText:cs,placeholder:I,removeIcon:ee.isTablet()?"always":"never",selectedValuesDescriptionId:Ue,selectedValuesKeyboardNavDescriptionId:je,textAlign:se,textTagListData:ts,userInput:Ye,virtualKeyboard:ee.isTablet()?B:void 0,...xe,...Ze,...He}),ys=us?ee.isPhone()?s.jsx(ze,{"aria-describedby":re.ariaDescribedBy,"aria-label":is,assistiveText:a,data:ce,dropdownId:es,enabledElementRef:oe,helpSourceLink:u,helpSourceText:y,isAddToListShown:Se,isDisabled:W,isEmptyResults:Fe,isFocused:Ce,isLoading:We,isOpen:us,isReadonly:$,isRequired:S,isSelectedOnlyView:ge,isUserFiltering:De,itemRenderer:w,itemText:v,label:T,liveRegionText:cs,placeholder:I,propIsLoading:m,searchText:Ve,selectedValuesDescriptionId:Ue,setDropdownOpen:Pe,setUserInput:Ne,stopFiltering:_e,textAlign:se,textTagListRef:He.textTagListRef,userAssistanceDensity:te,userInput:Ye,valueItems:U,virtualKeyboard:B,onAddToListAction:le.onAction,onCommit:A,onFieldBlur:ne.onfocusout,onFieldFocus:ne.onfocusin,onFieldInput:xe.onInput,onFieldKeyDown:xe.onKeyDown,onFieldKeyUp:xe.onKeyUp,onLoadRange:R,onSelectedValuesCountKeyDown:Ke.onKeyDown,onSelectedValuesCountKeyUp:Ke.onKeyUp,onSelectedValuesCountMouseDown:Ke.onMouseDown,onSelectedValuesCountToggle:Ke.onToggle}):s.jsx(Ie,{...de,...ye,assistiveText:a,dropdownId:es,dropdownRef:be,helpSourceLink:u,helpSourceText:y,isAddToListShown:Se,isDisabled:W,isDropdownAbove:ve,isEmptyResults:Fe,isOpen:us,isReadonly:$,isSelectedOnlyView:ge,isUserFiltering:De,itemRenderer:w,itemText:v,label:T,mainFieldRef:Ae,onAddToListAction:le.onAction,searchText:Ve,userAssistanceDensity:te}):null;return s.jsxs(t.Fragment,{children:[s.jsx(h.FormFieldContext.Provider,{value:Ge,children:s.jsx(Ee,{columnSpan:l,compactUserAssistance:ls,fieldLabel:T,hasInsideLabel:ds,inlineUserAssistance:as,isDropdownArrowShown:!0,isDropdownSelectedOnlyView:ge,isSelectedValuesCountShown:me,mainFieldRef:Ae,onBlur:ne.onfocusout,onFocus:ne.onfocusin,onDropdownArrowClick:ue.onClick,onSelectedValuesCountKeyDown:Ke.onKeyDown,onSelectedValuesCountKeyUp:Ke.onKeyUp,onSelectedValuesCountMouseDown:Ke.onMouseDown,onSelectedValuesCountToggle:Ke.onToggle,selectedValuesCount:U?.length,testId:k,...ns,...ke,...Qe,children:hs})}),ys]})}));e.SelectMultiple=Ye}));
//# sourceMappingURL=SelectMultiple-d8aaa2b8.js.map
