/**
 * @license
 * Copyright (c) 2014, 2024, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["exports"],function(e){"use strict";
/**
   * @license
   * Copyright (c) 2019 2024, Oracle and/or its affiliates.
   * Licensed under The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   *
   * Based on JSEP Parser
   * @license
   * JavaScript Expression Parser (JSEP) 0.3.4
   * JSEP may be freely distributed under the MIT License
   * http://jsep.from.so/
   */const n=function(e){return e.type===t?e.name:e.value},r="Compound",t="Identifier",i="MemberExpression",d="Literal",o="CallExpression",x="UnaryExpression",a="BinaryExpression",c="LogicalExpression",p="ConditionalExpression",u="ArrayExpression",s="ObjectExpression",h="FunctionExpression",f="NewExpression",l="Property";e.ARRAY_EXP=u,e.BINARY_EXP=a,e.CALL_EXP=o,e.COMPOUND=r,e.CONDITIONAL_EXP=p,e.ExpParser=function(){function e(e){for(var n=e.expr,r=n.charCodeAt(e.index);32===r||9===r||10===r||13===r;)r=n.charCodeAt(++e.index)}function A(n){var r,t,i=n.expr,d=function(e){var n,r,t,i,d,o,x,a,c,p;if(o=v(e),r=C(e),!r)return o;d={value:r,prec:q(r)},x=v(e),x||z("Expected expression after "+r,e.index);i=[o,d,x],c=r,p=d.prec;for(;(r=C(e))&&0!==(t=q(r,c,p));){for(d={value:r,prec:t},c=r,p=t;i.length>2&&t<=i[i.length-2].prec;)x=i.pop(),n=V(r=i.pop().value,o=i.pop(),x,e),i.push(n);(n=v(e))||z("Expected expression after "+c,e.index),i.push(d,n)}a=i.length-1,n=i[a];for(;a>1;)n=V(i[a-1].value,i[a-2],n,e),a-=2;return n}(n);return e(n),i.charCodeAt(n.index)!==N?d:(n.index++,(r=A(n))||z("Expected expression",n.index),e(n),i.charCodeAt(n.index)===L?(n.index++,(t=A(n))||z("Expected expression",n.index),{type:p,test:d,consequent:r,alternate:t}):void z("Expected :",n.index))}function C(n){var r=n.expr;e(n);for(var t=r.substr(n.index,Y),i=t.length;i>0;){if(F[t]&&(!K(r.charCodeAt(n.index))||n.index+t.length<r.length&&!W(r.charCodeAt(n.index+t.length))))return n.index+=i,t;t=t.substr(0,--i)}return!1}function v(r){var i,o,a,c=r.expr;if(e(r),J(i=c.charCodeAt(r.index))||i===m)return function(e){var n,r,t=e.expr,i="";for(;J(t.charCodeAt(e.index));)i+=t.charAt(e.index++);if(t.charCodeAt(e.index)===m)for(i+=t.charAt(e.index++);J(t.charCodeAt(e.index));)i+=t.charAt(e.index++);if(n=t.charAt(e.index),"e"===n||"E"===n){for(i+=t.charAt(e.index++),"+"!==(n=t.charAt(e.index))&&"-"!==n||(i+=t.charAt(e.index++));J(t.charCodeAt(e.index));)i+=t.charAt(e.index++);J(t.charCodeAt(e.index-1))||z("Expected exponent ("+i+t.charAt(e.index)+")",e.index)}r=t.charCodeAt(e.index),K(r)?z("Variable names cannot start with a number ("+i+t.charAt(e.index)+")",e.index):r===m&&z("Unexpected period",e.index);return{type:d,value:parseFloat(i),raw:i}}(r);if(i===k||i===w||i===O)return b(r);if(i===R)return function(r){var i=r.expr;r.index++;var d,o=[],x=0,a=i.length;for(;r.index<a&&!d;){e(r);var c=i.charCodeAt(r.index);if(c===M)d=!0,r.index++;else if(c===P)r.index++,++x!==o.length&&z("Unexpected token ,",r.index);else{var p=c===k||c===w?E(r):y(r);if(e(r),c=i.charCodeAt(r.index),p.type!==t||c!==P&&c!==M)if(c===L){r.index++;var u=r.writer;"_ko_property_writers"===n(p)&&(r.writer=1);try{o.push({type:l,key:p,value:A(r),shorthand:!1})}finally{r.writer=u}}else z("Expected ':'. Found "+String.fromCharCode(c),r.index);else o.push({type:l,key:p,value:p,shorthand:!0})}}d||z("Expected "+String.fromCharCode(M),r.index);return{type:s,properties:o}}(r);for(a=(o=c.substr(r.index,B)).length;a>0;){if(o in T&&(!K(c.charCodeAt(r.index))||r.index+o.length<c.length&&!W(c.charCodeAt(r.index+o.length))))return r.index+=a,{type:x,operator:o,argument:v(r),prefix:!0};o=o.substr(0,--a)}var p=r.index,u=r.index+8;return"function"!==c.substring(p,u)||W(c.charCodeAt(u))?!(!K(i)&&i!==_)&&b(r):(r.index=u,function(n){var r=n.expr;e(n);var t=r.charCodeAt(n.index);t!==_&&z("Expected (,",n.index);n.index++;var i=g(n,U,!0);e(n),t=r.charCodeAt(n.index),t!==R&&z("Expected {,",n.index);n.index++,e(n);var d,o=n.index,x=n.index;"return"===r.substring(x,x+6)&&(d=!0,n.index+=6);e(n);var a=A(n);e(n),t=r.charCodeAt(n.index),t===X&&(n.index++,e(n));t=r.charCodeAt(n.index),t!==M&&z("Expected },",n.index);return n.index++,{type:h,arguments:i,body:a,expr:r.substring(o,n.index-1),return:d}}(r))}function E(e){for(var n,r=e.expr,t="",i=r.charAt(e.index++),o=!1,x=r.length;e.index<x;){if((n=r.charAt(e.index++))===i){o=!0;break}if("\\"===n)switch(n=r.charAt(e.index++)){case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="\t";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=n}else t+=n}return o||z('Unclosed quote after "'+t+'"',e.index),{type:d,value:t,raw:i+t+i}}function y(n,r){var i,x=n.expr,a=x.charCodeAt(n.index),c=n.index;K(a)?n.index++:z("Unexpected "+x.charAt(n.index),n.index);for(var p=x.length;n.index<p&&W(a=x.charCodeAt(n.index));)n.index++;if("new"===(i=x.slice(c,n.index))&&!r){e(n);var u=b(n,o);return u.type!==o&&z("Expression of type: "+u.type+" not supported for constructor expression"),{type:f,callee:u.callee,arguments:u.arguments}}return D.has(i)?{type:d,value:D.get(i),raw:i}:{type:t,name:i}}function g(n,r,t){for(var i,d,o=n.expr,x=o.length,a=[],c=!1,p=0;n.index<x;){if(e(n),(i=o.charCodeAt(n.index))===r){c=!0,n.index++,r===U&&p&&p>=a.length&&z("Unexpected token "+String.fromCharCode(r),n.index);break}if(i===P){if(n.index++,++p!==a.length)if(r===U)z("Unexpected token ,",n.index);else if(r===I)for(var u=a.length;u<p;u++)a.push(null)}else(!(d=t?y(n):A(n))||a.length>p)&&z("Expected comma",n.index),a.push(d)}return c||z("Expected "+String.fromCharCode(r),n.index),a}function b(n,r){var t,d,x=n.expr;for(d=(t=x.charCodeAt(n.index))===_?function(n){n.index++;var r=A(n);if(e(n),n.expr.charCodeAt(n.index)===U)return n.index++,r;z("Unclosed (",n.index)}(n):t===k||t===w?E(n):t===O?function(e){return e.index++,{type:u,elements:g(e,I)}}(n):y(n),e(n),t=x.charCodeAt(n.index);t===m||t===O||t===_||G(n);){if(n.index++,t===m?(e(n),d={type:i,computed:!1,object:d,property:y(n,!0)}):t===N?(n.index++,e(n),d={type:i,computed:!1,optional:!0,object:d,property:y(n,!0)}):t===O?(d={type:i,computed:!0,object:d,property:A(n)},e(n),(t=x.charCodeAt(n.index))!==I&&z("Unclosed [",n.index),n.index++):t===_&&(d={type:o,arguments:g(n,U),callee:d}),r===d.type)return d;e(n),t=x.charCodeAt(n.index)}return d}this.parse=function(e){for(var n=e.length,t={index:0,expr:e},i=[];t.index<n;){var d=e.charCodeAt(t.index);if(d===X||d===P)t.index++;else{var o=A(t);o?i.push(o):t.index<n&&z('Unexpected "'+e.charAt(t.index)+'"',t.index)}}return 1===i.length?i[0]:{type:r,body:i}};var m=46,P=44,k=39,w=34,_=40,U=41,O=91,I=93,N=63,X=59,L=58,R=123,M=125;function j(e){return Object.keys(e).reduce(function(e,n){return Math.max(e,n.length)},0)}var S=!0,T={"-":S,"!":S,"~":S,"+":S,typeof:S},F={"=":1,"||":2,"??":2,"&&":3,"|":4,"^":5,"&":6,"==":7,"!=":7,"===":7,"!==":7,"<":8,">":8,"<=":8,">=":8,instanceof:8,"<<":9,">>":9,">>>":9,"+":10,"-":10,"*":11,"/":11,"%":11,"**":12},B=j(T),Y=j(F),D=new Map;function q(e,n,r){const t=F[e]||0;return 12!==t||void 0===n||e!==n?t:.5*(r+13)}function V(e,n,r,t){return"="!==e||t.writer||z("Unexpected operator '='",t.index),{type:"||"===e||"&&"===e||"??"===e?c:a,operator:e,left:n,right:r}}function G(e){var n=e.expr;return n.charCodeAt(e.index)===N&&n.charCodeAt(e.index+1)===m&&!J(n.charCodeAt(e.index+2))}function J(e){return e>=48&&e<=57}function K(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=128&&!F[String.fromCharCode(e)]}function W(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e>=128&&!F[String.fromCharCode(e)]}function z(e,n){var r=new Error(e+" at character "+n);throw r.index=n,r.description=e,r}D.set("true",!0),D.set("false",!1),D.set("null",null),D.set("undefined",void 0)},e.FUNCTION_EXP=h,e.IDENTIFIER=t,e.LITERAL=d,e.LOGICAL_EXP=c,e.MEMBER_EXP=i,e.NEW_EXP=f,e.OBJECT_EXP=s,e.PROPERTY=l,e.UNARY_EXP=x,e.getKeyValue=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojexpparser.js.map