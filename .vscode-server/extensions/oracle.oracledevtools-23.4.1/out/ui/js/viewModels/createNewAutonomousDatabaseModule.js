define(["require","exports","knockout","ojs/ojknockout-keyset","../common/dataAccessService","../common/localizedConstants","../common/scriptExecutionModels","../common/autonomousDBModels","ojs/ojarraytreedataprovider","../utilities","../common/messageService","../common/models","ojs/ojarraydataprovider","ojs/ojconverter-number","ojs/ojcore","ojs/ojcheckboxset","jquery","ojs/ojtreeview","ojs/ojarraytreedataprovider","ojs/ojbutton","ojs/ojknockout","ojs/ojinputtext","ojs/ojlabel","ojs/ojprogress","ojs/ojformlayout","ojs/ojselectcombobox","ojs/ojmessage","ojs/ojmessages","ojs/ojnavigationlist","ojs/ojcollapsible","ojs/ojlabelvalue","ojs/ojradioset","ojs/ojpopup","ojs/ojdialog","ojs/ojinputnumber","ojs/ojlistview","ojs/ojinputtext","ojs/ojknockout","ojs/ojbutton","ojs/ojformlayout"],(function(require,e,t,s,a,o,i,n,r,l,c,d,h,u){"use strict";let p;class m{}m.minFractionDedicatedOCPUCount=.1,m.minIntegerDedicatedOCPUCount=1,m.maxDedicatedOCPUCount=Number.MAX_SAFE_INTEGER,m.fractionDedicatedOCPUCountStep=.1,m.integerOCPUCountStep=1,m.minSharedInfraOCPUCount=1,m.maxSharedInfraOCPUCount=128,m.zeroNumber=0,m.minSharedInfraStorage=1,m.maxSharedInfraStorage=Number.MAX_SAFE_INTEGER,m.minDedicatedStorage=32,m.minDefaultDedicatedStorage=1024,m.maxDedicatedStorage=131072,m.alwaysFreeStorage=.02,m.defaultStorageInGB=1024,m.defaultStorageInTB=1,m.minStorageforGBForSharedATP_JSON_ECPU=20,m.minStorageforTBForSharedDW_ECPU=1,m.minStorageforTBForShared_OCPU=1,m.maxStorageforGB=393216,m.minStorageforTB=1,m.maxStorageforTB=384,m.minSharedECPUCount=2,m.maxSharedECPUCount=512,m.defaultECPUCount=2,m.defaultOCPUCount=1;class C{constructor(){this.databaseInformation=o.LocalizedConstants.Instance.databaseInformation,this.changeCompartment=o.LocalizedConstants.Instance.changeCompartment,this.compartmentName=o.LocalizedConstants.Instance.compartmentName,this.displayName=o.LocalizedConstants.Instance.displayName,this.databaseName=o.LocalizedConstants.Instance.databaseName,this.ipAddress=o.LocalizedConstants.Instance.ipAddresses,this.databaseType=o.LocalizedConstants.Instance.databaseType,this.chooseWorkloadType=o.LocalizedConstants.Instance.chooseWorkloadType,this.dedicated=o.LocalizedConstants.Instance.dedicated,this.configureDatabase=o.LocalizedConstants.Instance.configureDatabase,this.alwaysFree=o.LocalizedConstants.Instance.alwaysFree,this.mTLSConnection=o.LocalizedConstants.Instance.mTLSConnection,this.cpuCoreCount=o.LocalizedConstants.Instance.cpuCoreCount,this.storageinTB=o.LocalizedConstants.Instance.storageinTB,this.autoScaling=o.LocalizedConstants.Instance.autoScaling,this.autoScalingForStorage=o.LocalizedConstants.Instance.autoScalingForStorage,this.licenseType=o.LocalizedConstants.Instance.licenseType,this.bringyourOwnLicense=o.LocalizedConstants.Instance.bringyourOwnLicense,this.databaseStdEdition=o.LocalizedConstants.Instance.databaseStdEdition,this.databaseEntEdition=o.LocalizedConstants.Instance.databaseEntEdition,this.databaseEditionType=o.LocalizedConstants.Instance.databaseEditionType,this.licenseIncluded=o.LocalizedConstants.Instance.licenseIncluded,this.secureAccessFromEveryWhere=o.LocalizedConstants.Instance.secureAccessFromEveryWhere,this.secureAccessFromAllowedIPs=o.LocalizedConstants.Instance.secureAccessFromAllowedIPs,this.adminCredentials=o.LocalizedConstants.Instance.adminCredentials,this.userName=o.LocalizedConstants.Instance.userName,this.password=o.LocalizedConstants.Instance.pswdStr,this.confirmpassword=o.LocalizedConstants.Instance.confirmPswd,this.createADB=o.LocalizedConstants.Instance.createADB,this.addIPAddress=o.LocalizedConstants.Instance.addIPAddress,this.chooseAutonomousContainerDB=o.LocalizedConstants.Instance.chooseAutonomousContainerDB,this.containerDB=o.LocalizedConstants.Instance.containerDB,this.requiredText=" *",this.compartmentSelected=o.LocalizedConstants.Instance.compartmentSelected,this.noContainerAvailable=o.LocalizedConstants.Instance.noContainerAvailable,this.noDatabaseVersionAvailable=o.LocalizedConstants.Instance.noDatabaseVersionAvailable,this.dataWareHouse=o.LocalizedConstants.Instance.dataWareHouse,this.dataWareHouseDescription=o.LocalizedConstants.Instance.dataWareHouseDescription,this.transactionProcessing=o.LocalizedConstants.Instance.transactionProcessing,this.transactionProcessingDescription=o.LocalizedConstants.Instance.transactionProcessingDescription,this.json=o.LocalizedConstants.Instance.json,this.jsonDescription=o.LocalizedConstants.Instance.jsonDescription,this.chooseDeploymentType=o.LocalizedConstants.Instance.chooseDeploymentType,this.sharedInfrastructure=o.LocalizedConstants.Instance.sharedInfrastructure,this.sharedInfrastructureDesc=o.LocalizedConstants.Instance.sharedInfrastructureDesc,this.dedicatedInfrastructure=o.LocalizedConstants.Instance.dedicatedInfrastructure,this.dedicatedInfrastructureDesc=o.LocalizedConstants.Instance.dedicatedInfrastructureDesc,this.alwaysFreeDescription=o.LocalizedConstants.Instance.alwaysFreeDescription,this.nonFreecpuCoreCountDesc=o.LocalizedConstants.Instance.nonFreecpuCoreCountDesc,this.freecpuCoreCountDesc=o.LocalizedConstants.Instance.freecpuCoreCountDesc,this.nonFreeStorageDesc=o.LocalizedConstants.Instance.nonFreeStorageDesc,this.freeStorageDesc=o.LocalizedConstants.Instance.freeStorageDesc,this.adminUserDescription=o.LocalizedConstants.Instance.adminUserDescription,this.readonly=o.LocalizedConstants.Instance.readonly,this.pswdPattern=o.LocalizedConstants.Instance.pswdPattern,this.emptyPswd=o.LocalizedConstants.Instance.emptyPswd,this.pswdMismatch=o.LocalizedConstants.Instance.pswdMismatch,this.adbNameDescription=o.LocalizedConstants.Instance.adbNameDescription,this.adbInvalidDisplayName=o.LocalizedConstants.Instance.adbInvalidDisplayName,this.adbInvalidName=o.LocalizedConstants.Instance.adbInvalidName,this.adbConnectionUIHeader=o.LocalizedConstants.Instance.adbConnectionUIHeader,this.adbATPText=o.LocalizedConstants.Instance.adbATPText,this.adbDWText=o.LocalizedConstants.Instance.adbDWText,this.adbJSONText=o.LocalizedConstants.Instance.adbJSONText,this.db19C=o.LocalizedConstants.Instance.db19C,this.db21C=o.LocalizedConstants.Instance.db21C,this.workloadTypeText=o.LocalizedConstants.Instance.workloadTypeText,this.deploymentTypeText=o.LocalizedConstants.Instance.deploymentTypeText,this.licenseTypeText=o.LocalizedConstants.Instance.licenseTypeText,this.networkAccessTypeText=o.LocalizedConstants.Instance.networkAccessTypeText,this.databaseVersionText=o.LocalizedConstants.Instance.databaseVersionText,this.profileName=o.LocalizedConstants.Instance.profile,this.OK=o.LocalizedConstants.Instance.OK,this.compartmentFullPath=o.LocalizedConstants.Instance.compartmentFullPath,this.ocpuErrorForSharedDeployment=o.LocalizedConstants.Instance.ocpuErrorForSharedDeployment,this.ecpuErrorForSharedDeployment=o.LocalizedConstants.Instance.ecpuErrorForSharedDeployment,this.ocpuErrorForDedicatedDeployement=o.LocalizedConstants.Instance.ocpuErrorForDedicatedDeployement,this.storageErrorForSharedDeployment=o.LocalizedConstants.Instance.storageErrorForSharedDeployment,this.storageErrorForECPUDWSharedDeployment=o.LocalizedConstants.Instance.storageErrorForECPUDWSharedDeployment,this.storageErrorForECPUATPSharedDeployment=o.LocalizedConstants.Instance.storageErrorForECPUATPSharedDeployment,this.storageErrorForDedicatedDeployment=o.LocalizedConstants.Instance.storageErrorForDedicatedDeployment,this.invalidValueError=o.LocalizedConstants.Instance.invalidValue,this.selectCompartmentForContainerdb=o.LocalizedConstants.Instance.selectCompartmentForContainerdb,this.currentSelection=o.LocalizedConstants.Instance.currentSelection,this.compartmentNameForContainerDB=o.LocalizedConstants.Instance.compartmentNameForContainerDB,this.updateCompartment=o.LocalizedConstants.Instance.updateCompartment,this.selectNewCompartment=o.LocalizedConstants.Instance.selectNewCompartment,this.cancel=o.LocalizedConstants.Instance.cancel,this.adbNameAlreadyInUse=o.LocalizedConstants.Instance.adbNameUsedInAnotherPage,this.yes=o.LocalizedConstants.Instance.yes,this.no=o.LocalizedConstants.Instance.no,this.update=o.LocalizedConstants.Instance.update,this.add=o.LocalizedConstants.Instance.add,this.remove=o.LocalizedConstants.Instance.remove,this.addMyIPAddress=o.LocalizedConstants.Instance.addMyIPAddress,this.ecpu=o.LocalizedConstants.Instance.ecpu,this.ocpu=o.LocalizedConstants.Instance.ocpu,this.changeComputeModelText=o.LocalizedConstants.Instance.changeComputeModelText,this.GB=o.LocalizedConstants.Instance.GB,this.TB=o.LocalizedConstants.Instance.TB,this.dedicatedADBWithNoComputeResources=o.LocalizedConstants.Instance.dedicatedADBWithNoComputeResources}}return class{constructor(){this.msgPos={my:{vertical:"top",horizontal:"end"},at:{vertical:"top",horizontal:"end"},of:"window"},this.createADBUILabelText=new C,this.compartmentFullNameForDisplay=t.observable(""),this.profileName=t.observable(""),this.displayName=t.observable(""),this.databaseName=t.observable(""),this.ipAddress=t.observable(""),this.databaseType=t.observable(""),this.cpuCoreCount=t.observable(2),this.ocpuStep=t.observable(m.integerOCPUCountStep),this.minCPUCoreCount=t.observable(m.minSharedInfraOCPUCount),this.maxCPUCoreCount=t.observable(m.maxSharedInfraOCPUCount),this.storage=t.observable(),this.minStorage=t.observable(m.minSharedInfraStorage),this.maxStorage=t.observable(m.maxSharedInfraStorage),this.storageLabel=t.observable(),this.userName=t.observable("ADMIN"),this.password=t.observable(""),this.cpuCountLabel=t.observable(o.LocalizedConstants.Instance.ecpuCount),this.confirmpassword=t.observable(""),this.licenseType=t.observable(n.ADBLicenseType.BringYourLicense),this.computeModelType=t.observable(n.ADBComputeModel.ECPU),this.StorageUnit=t.observable(),this.databaseEditionType=t.observable(n.ADBDatabaseEdition.DatabaseEnterpriseEdition),this.networkAccessType=t.observable(n.ADBNetworkAccessType.SecureAccessFromEveryWhere),this.adbworkLoadType=t.observable(n.ADBworkLoadType.DW),this.deploymentType=t.observable(n.ADBDeploymentType.SharedInfrastructure),this.databaseVersion=t.observable(""),this.compartmentData=t.observable(),this.rootTenancy=t.observable(),this.currentCompartmentID=t.observable(""),this.currentCompartmentName=t.observable(""),this.currentCompartmentFullName=t.observable(),this.selectedCompartmentID=t.observable(""),this.selectedCompartmentName="",this.selectedCompartmentFullName="",this.compartmentNameForDedicatedInfra=t.observable(""),this.compartmentArrayTree=[],this.selected=new s.ObservableKeySet,this.expanded=new s.ObservableKeySet,this.data=t.observable(null),this.showcheckBoxes=t.observable(!0),this.containerDatabases=t.observableArray(),this.selectedContainerDatabase=t.observable(null),this.pswderror=t.observable(""),this.pswdMismatchError=t.observable(""),this.ocpuError=t.observable(""),this.storageError=t.observable(""),this.inValidValueError=t.observable(""),this.inValidIPAddressValueErrorInDialog=t.observable(""),this.pageinitialized=!1,this.dbNameError=t.observable(""),this.dbDisplayNameError=t.observable(""),this.createADB2=t.observable(),this.selectCompartmentForProfile=t.observable(""),this.region="",this.isCreateInProgress=t.observable(!1),this.decimalStorageHalfDownConverter=t.observable(),this.decimalOCPUHalfDownConverter=t.observable(),this.isAlwaysFree=()=>null==this.alwaysFree()||0!=this.alwaysFree().length,this.disableAutoScaling=t.observable(!1),this.disableAutoScalingForStorage=t.observable(!1),this.validNetworkAccessType=()=>{let e=!0;return e=0==this.inValidValueError().length||this.networkAccessType()==n.ADBNetworkAccessType.SecureAccessFromAllowedIPs&&this.ipAddress().length>=0&&0==this.inValidValueError().length,e},this.showContainerDBControls=t.pureComputed((()=>this.isDedicated())),this.showOCPUError=t.pureComputed((()=>{let e=this.ocpuError().length>0;return this.pageinitialized||(e=!1),e})),this.showStorageError=t.pureComputed((()=>{let e=this.storageError().length>0;return this.pageinitialized||(e=!1),e})),this.showdbNameError=t.pureComputed((()=>{let e=this.dbNameError().length>0;return this.pageinitialized||(e=!1),e})),this.showdbDisplayNameError=t.pureComputed((()=>{let e=this.dbDisplayNameError().length>0;return this.pageinitialized||(e=!1),e})),this.showPasswordMismatchError=t.pureComputed((()=>{let e=this.pswdMismatchError().length>0;return this.pageinitialized||(e=!1),e})),this.showInvalidPasswordError=t.pureComputed((()=>{let e=this.pswderror().length>0;return this.pageinitialized||(e=!1),e})),this.disableDeploymentTypesOption=t.observable(!1),this.disableLicenseTypesOption=t.observable(!1),this.disableChangeCompueModelOption=t.observable(!1),this.disableNetworkAccessControls=t.observable(!1),this.showAlwaysFreeOption=t.pureComputed((()=>!this.isDedicated())),this.sharedDeploymentType=t.pureComputed((()=>this.deploymentType()==n.ADBDeploymentType.SharedInfrastructure)),this.validDatabaseName=e=>{let t=new RegExp("^[a-zA-Z][a-zA-Z0-9]{0,}$");return null!=e.match(t)},this.onOCPUCount=e=>{this.pageinitialized&&(this.ocpuCount=e.detail.value,this.setOCPUError(this.ocpuCount))},this.onStorage=e=>{this.pageinitialized&&this.resetStorageErrorLabel(e.detail.value)},this.currentDatabaseName="",this.onDatabaseName=e=>{if(this.pageinitialized){let t=e.detail.value;this.currentDatabaseName=t;let s="";this.validDatabaseName(t)?(s=t,this.dbNameError("")):this.dbNameError(this.createADBUILabelText.adbInvalidName),this.updatePageTitle(s)}},this.onDatabaseDisplayName=e=>{if(this.pageinitialized){let t=e.detail.value;this.validDatabaseDisplayName(t)?this.dbDisplayNameError(""):this.dbDisplayNameError(this.createADBUILabelText.adbInvalidDisplayName)}},this.onConfirmPswdProvided=e=>{let t=e.detail.value;this.confirmpassword(t),(0!=t.length||this.pageinitialized)&&this.setPswdMismatchError(this.password(),t)},this.showAutoScaling=t.pureComputed((()=>(this.isDedicated()&&this.autoScaling.removeAll(),!0))),this.showStorageAutoScaling=t.pureComputed((()=>!this.isDedicated())),this.findNode=(e,s)=>{const a=t.isObservable(e)?e():e;for(let e=0;e<a.length;e+=1){if(a[e].id==s)return a[e];if(a[e].children){const t=this.findNode(a[e].children,s);if(t)return t}}},this.onPswdProvided=e=>{let t=e.detail.value;(0!=t.length||this.pageinitialized)&&(this.confirmpassword(""),this.pswdMismatchError(""),this.validPswd(t)||0==t.length?this.pswderror(""):this.pswderror(this.createADBUILabelText.pswdPattern))},this.launchSelectCompartmentsDialog=()=>{document.getElementById("selectCompartmentDialogID").open()},this.disableConfigureDBControls=t.pureComputed((()=>{let e=null==this.alwaysFree()||0!=this.alwaysFree().length;return this.resetConfigureDBControlsValues(e),e})),this.resetConfigureDBControlsValues=e=>{e?(this.prevCPUCoreCount=this.cpuCoreCount(),this.prevstorage=this.storage(),this.cpuCoreCount(m.minSharedInfraOCPUCount),this.storage(m.alwaysFreeStorage)):(this.cpuCoreCount(this.prevCPUCoreCount),this.storage(this.prevstorage))},this.databaseVersions=t.observableArray(),this.ecpuOCPUCounts=t.observableArray(),this.ecpuOCPUCount=t.observable(),this.cpuAvailabelForSelectedContainer=t.observable(!0),this.workLoadTypes=t.observableArray([{value:n.ADBworkLoadType.OLTP,label:this.createADBUILabelText.adbATPText},{value:n.ADBworkLoadType.DW,label:this.createADBUILabelText.adbDWText},{value:n.ADBworkLoadType.AJD,label:this.createADBUILabelText.adbJSONText}]),this.licenseTypes=t.observableArray([{value:n.ADBLicenseType.BringYourLicense,label:this.createADBUILabelText.bringyourOwnLicense},{value:n.ADBLicenseType.SubscribeToNewLicense,label:this.createADBUILabelText.licenseIncluded}]),this.computeModelTypes=t.observableArray([{value:n.ADBComputeModel.ECPU,label:this.createADBUILabelText.ecpu},{value:n.ADBComputeModel.OCPU,label:this.createADBUILabelText.ocpu}]),this.StorageUnits=t.observableArray([{value:n.ADBStorageUnit.GB,label:this.createADBUILabelText.GB},{value:n.ADBStorageUnit.TB,label:this.createADBUILabelText.TB}]),this.databaseEditionTypes=t.observableArray([{value:n.ADBDatabaseEdition.DatabaseEnterpriseEdition,label:this.createADBUILabelText.databaseEntEdition},{value:n.ADBDatabaseEdition.DatabaseStandardEdition,label:this.createADBUILabelText.databaseStdEdition}]),this.networkAccessTypes=t.observableArray([{value:n.ADBNetworkAccessType.SecureAccessFromEveryWhere,label:this.createADBUILabelText.secureAccessFromEveryWhere},{value:n.ADBNetworkAccessType.SecureAccessFromAllowedIPs,label:this.createADBUILabelText.secureAccessFromAllowedIPs}]),this.deploymentTypes=t.observableArray([{value:n.ADBDeploymentType.SharedInfrastructure,label:this.createADBUILabelText.sharedInfrastructure},{value:n.ADBDeploymentType.DedicatedInfrastructure,label:this.createADBUILabelText.dedicatedInfrastructure}]),this.selectedChanged=e=>{if(e&&e.detail&&e.detail.value&&e.detail.value.values().size>0){var t=[];e.detail.value.values().forEach((function(e){t.push(e)}));var s=this.findNode(this.compartmentArrayTree,t[0]);null!=s&&null!=s.fullPath&&(this.selectedCompartmentID(s.id),this.selectedCompartmentName=s.nameForDisplay,this.selectedCompartmentFullName=s.fullNameForDisplay)}},this.okButtonDisabled=t.pureComputed((()=>{let e=!0;return this.currentCompartmentID()!==this.selectedCompartmentID()&&(e=!1),e}),this),this.onOKCompartment=()=>{document.getElementById("selectCompartmentDialogID").close(),this.currentCompartmentID(this.selectedCompartmentID()),this.currentCompartmentName(this.selectedCompartmentName),this.currentCompartmentFullName(this.selectedCompartmentFullName),this.compartmentNameForDedicatedInfra(this.selectedCompartmentFullName),this.getAutonomousContainerDatabases(this.selectedCompartmentID(),this.selectedCompartmentFullName)},this.onCancelCompartment=()=>{document.getElementById("selectCompartmentDialogID").close()},this.onAutonomousContainerDatabasesReceived=e=>{this.disableDeploymentTypesOption(!1),this.isCreateInProgress(!1);let t=e.data;if(this.containerDatabases.removeAll(),0==t.adbContainerDatabases.length){let e=new n.autonomousContainerDBResponse;e.displayName=this.createADBUILabelText.noContainerAvailable,this.containerDatabases.push({value:e,label:this.createADBUILabelText.noContainerAvailable}),this.selectedContainerDatabase(e),this.populateOCPUECPUCount([]),p.cpuCountLabel(o.LocalizedConstants.Instance.cpuCoreCount),p.computeModelType(n.ADBComputeModel.OCPU)}else{let e=null;for(let s=0;s<t.adbContainerDatabases.length;s++)e=t.adbContainerDatabases[s],this.containerDatabases.push({value:t.adbContainerDatabases[s],label:e.displayName});this.selectedContainerDatabase(t.adbContainerDatabases[0])}},this.getAutonomousContainerDatabases=(e,t)=>{a.DataAccessService.instance.logInfo("getAutonomousContainerDatabases request received.");var s=new i.MessageBase;s.type=i.MessageName.autonomousContainerDBRequestMessage;var o=new n.autonomousContainerDBRequest;o.windowUri=a.DataAccessService.instance.windowUri,o.compartmentID=e,o.compartmentName=t,o.profileName=a.DataAccessService.instance.profileName,o.workloadType=this.adbworkLoadType(),o.executionId=a.DataAccessService.instance.currentExecutionId,s.data=o;try{a.DataAccessService.instance.logInfo("Sending autonomousContainerDBrequest."),a.DataAccessService.instance.send(s),a.DataAccessService.instance.logInfo("Successfully placed autonomousContainerDBrequest")}catch(e){a.DataAccessService.instance.logError(e)}},this.onCompartmentsDataReceived=e=>{var t=e,s=JSON.parse(t.compartmentList),a=t.rootNodeName;if(this.rootTenancy(a),t&&t.compartmentList&&(this.compartmentArrayTree.push(s),this.data(new r(this.compartmentArrayTree,{keyAttributes:"id"}))),t.compartmentToselect){this.selected.add([t.compartmentToselect]),null!=t.ancestorList&&t.ancestorList.length>0&&(t.ancestorList=t.ancestorList.slice(0,-1),this.expanded.add(t.ancestorList));var o=this.findNode(this.compartmentArrayTree,t.compartmentToselect);o&&(this.currentCompartmentID(o.id),this.currentCompartmentName(o.nameForDisplay),this.currentCompartmentFullName(o.fullNameForDisplay),this.selectedCompartmentID(o.id),this.selectedCompartmentName=o.nameForDisplay,this.selectedCompartmentFullName=o.fullNameForDisplay)}else this.selected.add([t.rootNodeID])},this.enableCreatebutton=t.pureComputed((()=>{var e=!1;return 0==this.dbNameError().length&&0==this.pswderror().length&&0==this.pswdMismatchError().length&&this.confirmpassword().length>0&&this.validDatabaseContainer()&&this.validDatabaseVersion()&&0==this.ocpuError().length&&0==this.storageError().length&&0==this.dbDisplayNameError().length&&this.validNetworkAccessType()&&(!this.isDedicated()||this.currentCompartmentID()&&this.validDatabaseContainer())&&this.cpuAvailabelForSelectedContainer()&&(e=!0),e}),this),this.licenseOptions=[{id:"ownLicenseopt",value:"ownLicense",displayValue:this.createADBUILabelText.bringyourOwnLicense},{id:"subToNewLicenseopt",value:"subToNewLicense",displayValue:this.createADBUILabelText.licenseIncluded}],this.isMtlsConnectionRequired=t.observable(!0),this.handlersField=new Map,this.onCreateNewAutonomousDBResponseReceived=e=>{e.data.operationSucceeded||(this.isCreateInProgress(!1),this.password(""),this.confirmpassword(""),this.pswderror(""),this.pswdMismatchError(""),this.configureADBModuleCreateADBProgressHandler&&this.configureADBModuleCreateADBProgressHandler(!1))},this.onCreateNewAutonomousDBInitializationDataReceived=e=>{var t=e.data;this.compartmentFullNameForDisplay(t.compartmentFullPathForDisplay),this.compartmentID=t.compartmentID,this.displayName(t.displayName),this.databaseName(t.dbName),this.cpuCoreCount(t.cpuCoreCount),this.storage(t.storage),this.userName(t.userName),this.adbworkLoadType(t.workLoadType),this.onCompartmentsDataReceived(t.compartmentData),this.profileName(t.profileName),this.prevCPUCoreCount=this.cpuCoreCount(),this.prevstorage=this.storage(),t.autoScaling&&this.autoScaling.push("yes"),t.autoScalingForStorage&&this.autoScalingForStorage.push("yes"),t.alwaysFree&&this.alwaysFree.push("yes"),t.isMtlsConnectionRequired?this.mTLSConnection.push("yes"):this.mTLSConnection.push("no"),this.pageinitialized=!0,this.dbVersionListForWorkload.setMap(n.dbVersionsForWorkloadNode.getMap(t.dbVersionJSONDataForWorkloadNode)),this.populateSupportedDatabaseVersionComboBox(this.adbworkLoadType(),!0),this.selectCompartmentForProfile(`${o.LocalizedConstants.Instance.changeCompartment} For Profile - '${t.profileName}'`),this.compartmentNameForDedicatedInfra(t.compartmentFullPathForDisplay),this.region=t.region,this.computeModelType(t.computeModel),this.StorageUnit(t.storageUnit),this.storageLabel(t.storageLabel)},this.getCreateNewAutonomousDBInitializationData=()=>{a.DataAccessService.instance.logInfo("get CreateNewAutonomousDBInitializationData request received.");var e=new i.MessageBase;e.type=i.MessageName.initializeCreateNewAutonomousDBPageRequestMessage;var t=new n.initializeCreateNewAutonomousDBPageRequest;t.executionId=a.DataAccessService.instance.currentExecutionId,t.windowUri=a.DataAccessService.instance.windowUri,t.profileName=a.DataAccessService.instance.profileName,t.workloadType=a.DataAccessService.instance.adbWorkLoadType,e.data=t;try{a.DataAccessService.instance.send(e),a.DataAccessService.instance.logInfo("Successfully placed get CreateNewAutonomousDBInitializationData request")}catch(e){a.DataAccessService.instance.logError(e)}},this.isDedicated=()=>this.deploymentType()==n.ADBDeploymentType.DedicatedInfrastructure,this.validDatabaseVersion=()=>{let e=!0;return this.databaseVersion()==this.createADBUILabelText.noDatabaseVersionAvailable&&(e=!1),e},this.validDatabaseContainer=()=>{let e=!0;return this.isDedicated()&&this.selectedContainerDatabase().displayName==this.createADBUILabelText.noContainerAvailable&&(e=!1),e},this.ownedADBName=void 0,this.onCreateNewAutonomousDatabase=(e,t,s)=>{a.DataAccessService.instance.logInfo("get onCreateNewAutonomousDatabase request received."),this.ownedADBName=this.databaseName();var r=new i.MessageBase;r.type=i.MessageName.ociCreateNewATPDBRequestMessage;var h=new n.createNewAutonomousDBRequest;let u=this.isDedicated(),p=null==this.alwaysFree()||0!=this.alwaysFree().length;h.executionId=a.DataAccessService.instance.currentExecutionId,h.windowUri=a.DataAccessService.instance.windowUri,h.compartmentID=this.compartmentID,h.dbName=this.databaseName(),h.displayName=this.displayName(),h.profileName=this.profileName(),h.compartmentFullPath=this.compartmentFullNameForDisplay(),this.sharedDeploymentType()?this.cpuCoreCount()?h.cpuCoreCount=this.cpuCoreCount():h.cpuCoreCount=1:h.cpuCoreCount=Number(this.ecpuOCPUCount()),h.password=l.toCodePointArray(this.password()),h.dedicated=u,h.autonomousContainerDatabaseId=null,u?(h.dataStorageSizeInGBs=this.storage(),h.isAccessControlEnabled=this.isAccessControlEnabled,this.whitelistedIps.length>0&&(h.whitelistedIps=this.whitelistedIps),a.DataAccessService.instance.logInfo("In request to create dedicated instance"),a.DataAccessService.instance.logInfo("containerDatabases length: "+this.containerDatabases.length),this.containerDatabases().length>0&&null!=this.selectedContainerDatabase()&&(a.DataAccessService.instance.logInfo("Selected container db display name: "+this.selectedContainerDatabase().displayName),h.autonomousContainerDatabaseId=this.selectedContainerDatabase().containerDatabaseID)):(h.isMtlsConnectionRequired=this.isMtlsConnectionRequired(),h.whitelistedIps=this.networkAccessType()==n.ADBNetworkAccessType.SecureAccessFromAllowedIPs?this.whitelistedIps:[" "]),h.alwaysFree=p,h.autoScaling=null==this.autoScaling()||0!=this.autoScaling().length,h.autoScalingForStorage=null==this.autoScalingForStorage()||0!=this.autoScalingForStorage().length,h.licenseType=this.licenseType(),h.databaseEditionType=this.databaseEditionType(),h.workLoadType=this.adbworkLoadType(),h.dbVersion=this.databaseVersion(),h.region=this.region,h.computeModel=this.computeModelType(),p?(h.computeModel=null,h.dataStorageSizeInGBs=null,h.dataStorageSizeInTBs=null,h.cpuCoreCount=null):this.StorageUnit()==n.ADBStorageUnit.GB?h.dataStorageSizeInGBs=this.storage():h.dataStorageSizeInTBs=this.storage(),r.data=h;try{a.DataAccessService.instance.send(r),a.DataAccessService.instance.logInfo("Successfully placed createNewAutonomousDatabase request"),this.isCreateInProgress(!0),this.configureADBModuleCreateADBProgressHandler&&this.configureADBModuleCreateADBProgressHandler(!0),c.MessagesService.getinstance().ClearAll(),c.MessagesService.getinstance().ShowMessageDetailed(o.LocalizedConstants.Instance.closeCreateAutonomousDbUI,d.Severity.info,-1)}catch(e){a.DataAccessService.instance.logError(e)}},this.workLoadTypeChangedHandler=e=>{if(this.pageinitialized){this.deploymentTypes.removeAll();let e=this.isAlwaysFree();this.populateSupportedDatabaseVersionComboBox(this.adbworkLoadType(),e),this.updateDeploymentType(e,this.adbworkLoadType()),this.updateLicenseType(e,this.adbworkLoadType()),this.resetComputeModelToECPU(),this.resetStorage(),this.resetOCPULimits(),this.resetOCPUCountAndLabel(),this.resetStorageErrorLabel(this.storage())}},this.databaseEditionTypeChangedHandler=e=>{},this.showIPAddressControls=t.observable(!1),this.disableAuthenticationControl=t.observable(!0),this.licenseTypeChangedHandler=e=>{},this.containerDBChangedHandler=e=>{e&&e.detail&&e.detail.value&&(p.populateOCPUECPUCount(e.detail.value.provisionableCpus),p.cpuCountLabel(e.detail.value.computeModel==n.ADBComputeModel.ECPU?o.LocalizedConstants.Instance.ecpuCount:o.LocalizedConstants.Instance.cpuCoreCount),p.computeModelType(e.detail.value.computeModel))},this.onAlwaysFreeValueChanged=e=>{if(this.pageinitialized&&e&&e.detail){let t=null==e.detail.value||0!=e.detail.value.length;p.decimalStorageHalfDownConverter(this.getStorageConverter(t)),this.updateDeploymentType(t,this.adbworkLoadType()),this.populateSupportedDatabaseVersionComboBox(this.adbworkLoadType(),t),t?(this.autoScaling.removeAll(),this.disableAutoScaling(!0),this.autoScalingForStorage.removeAll(),this.disableAutoScalingForStorage(!0),this.setLicenseIncludedLicenseType(),this.disableLicenseTypesOption(!0)):(this.disableAutoScaling(!1),this.disableAutoScalingForStorage(!1),this.disableLicenseTypesOption(!1))}},this.onmTLSValueChanged=e=>{if(this.pageinitialized&&e&&e.detail){let t=null==e.detail.value||0!=e.detail.value.length;this.updateDeploymentType(t,this.adbworkLoadType()),this.updateLicenseType(t,this.adbworkLoadType()),this.populateSupportedDatabaseVersionComboBox(this.adbworkLoadType(),t),t?(this.autoScaling.removeAll(),this.disableAutoScaling(!0),this.autoScalingForStorage.removeAll(),this.disableAutoScalingForStorage(!0)):(this.disableAutoScaling(!1),this.disableAutoScalingForStorage(!1))}},this.ecpuOCPUCountChangedHandler=e=>{},this.deploymentTypeChangedHandler=e=>{this.pageinitialized&&(this.deploymentType()==n.ADBDeploymentType.DedicatedInfrastructure?(p.computeModelType(n.ADBComputeModel.OCPU),p.cpuCountLabel(o.LocalizedConstants.Instance.cpuCoreCount),this.getAutonomousContainerDatabases(this.selectedCompartmentID(),this.compartmentNameForDedicatedInfra()),this.disableDeploymentTypesOption(!0)):p.computeModelType(n.ADBComputeModel.ECPU),this.resetStorage(),this.resetOCPUCountAndLabel(),this.resetOCPULimits(),this.setOCPUError(this.ocpuCount),this.resetStorageErrorLabel(this.storage()))},this.databaseVersionChangedHandler=e=>{},this.updateNetworkAccessControls=e=>{e&&(this.networkAccessType(e.networkAccessType),this.isMtlsConnectionRequired(e.isMtlsConnectionRequired))},this.aclModuleDataHandler=e=>{this.whitelistedIps=e},this.isAccessControlEnabled=!1,this.enableDBLevelAccessControlHandler=e=>{this.isAccessControlEnabled=e},this.createADBPageHandler=e=>{this.configureADBModuleCreateADBProgressHandler=e},this.transitionCompleted=()=>{this.getCreateNewAutonomousDBInitializationData(),$("oj-combobox-one").on("cut paste",(function(e){e.preventDefault()})),$("oj-combobox-one").on("contextmenu",(function(e){return!1}))},this.onThemeChanged=e=>{a.DataAccessService.instance.logInfo("Theme Changed"),l.setContrast()},this.initialize=()=>{this.compartmentArrayTree=[],this.selected.clear(),this.expanded.clear(),this.whitelistedIps=new Array,this.alwaysFree.removeAll(),this.mTLSConnection.removeAll(),this.autoScaling.removeAll(),this.autoScalingForStorage.removeAll(),this.dbVersionListForWorkload=new n.dbVersionsForWorkloadNode,this.getCreateNewAutonomousDBInitializationData(),this.licenseType(n.ADBLicenseType.BringYourLicense),this.computeModelType(n.ADBComputeModel.ECPU),this.databaseEditionType(n.ADBDatabaseEdition.DatabaseEnterpriseEdition),this.networkAccessType(n.ADBNetworkAccessType.SecureAccessFromEveryWhere),this.deploymentType(n.ADBDeploymentType.SharedInfrastructure),this.userName("ADMIN"),this.password(""),this.confirmpassword("")},this.reInitializeACLModulePage=e=>{this.reInitializeACLModulePageHandler=e},this.dbnameUsedInAnotherwindow=!1,this.onUsedADBNamesUpdatedMessage=e=>{if(this.isCreateInProgress()||!this.pageinitialized)return;let t=this.currentDatabaseName;if(t&&!this.validDatabaseName(t))return;let s=e.data;if(s&&t)for(const e in s.usedADBNames){const o=s.usedADBNames[e];if(e!==a.DataAccessService.instance.currentExecutionId&&o===t&&o!==this.ownedADBName)return this.dbNameError(this.createADBUILabelText.adbNameAlreadyInUse),void(this.dbnameUsedInAnotherwindow=!0)}this.dbnameUsedInAnotherwindow&&(this.dbnameUsedInAnotherwindow=!1,this.dbNameError(""))},this.ipAddresses=t.observableArray(),this.lastItemId=this.ipAddresses().length,this.ipAddressDataProvider=new h(this.ipAddresses,{keyAttributes:"id"}),this.inputIPAddress=t.observable(""),this.selectedItems=new s.ObservableKeySet,this.isTextEmpty=t.observable(!0),this.IPAddressRawValueChanged=e=>{const t=e.detail.value;this.isIPAddressEmpty(0===t.trim().length),this.validIPAddress(t)?this.inValidIPAddressValueErrorInDialog(""):this.inValidIPAddressValueErrorInDialog(this.createADBUILabelText.invalidValueError)},this.onIPAddressChange=e=>{if(this.pageinitialized){let t=e.detail.value
;this.validIPAddress(t)?this.inValidValueError(""):this.inValidValueError(this.createADBUILabelText.invalidValueError)}},this.handleCurrentItemChanged=e=>{const t=e.detail.value,s=this.ipAddresses();for(let e=0;e<s.length;e++)if(s[e].id===t){this.currentIndex=e,this.inputIPAddress(s[e].item);break}},this.onRemoveIPAddressSelected=()=>{this.selectedItems().values().forEach((e=>{this.ipAddresses.remove((t=>t.id===e))}))},this.onPublicIPAddressReceived=e=>{let t=e.data;this.inputIPAddress(t.ipAddress)},this.onOKUpdateIPAddressDialog=()=>{let e="";if(this.ipAddresses&&this.ipAddresses())for(let t=0;t<this.ipAddresses().length;t++)t>0&&(e+=","),e+=this.ipAddresses()[t].item;document.getElementById("changeIPAddressDialogID").close(),this.ipAddress(e)},this.onCancelIPAddressDialog=()=>{document.getElementById("changeIPAddressDialogID").close()},this.onAddIPAddress=()=>{const e=this.inputIPAddress();""!==e&&(this.lastItemId++,this.ipAddresses.push({id:this.lastItemId,item:e})),this.inputIPAddress("")},this.onAddMyIPAddress=()=>{a.DataAccessService.instance.logInfo("getpublicIPAddress request received.");var e=new i.MessageBase;e.type=i.MessageName.ociGetPublicIPAddressRequesttMessage;var t=new n.GetPublicIPAddressRequest;t.windowUri=a.DataAccessService.instance.windowUri,t.executionId=a.DataAccessService.instance.currentExecutionId,e.data=t;try{a.DataAccessService.instance.logInfo("Sending getpublicIPAddress."),a.DataAccessService.instance.send(e),a.DataAccessService.instance.logInfo("Successfully placed getpublicIPAddress")}catch(e){a.DataAccessService.instance.logError(e)}},this.isIPAddressEmpty=t.observable(!0),this.isSelectionEmpty=t.observable(!1),this.isTextOrSelectionEmpty=t.computed((()=>this.isIPAddressEmpty()||this.isSelectionEmpty())),this.showInValidValueError=t.pureComputed((()=>{let e=this.inValidValueError().length>0;return this.pageinitialized||(e=!1),e})),this.showInValidIPAddressValueErrorInDialog=t.pureComputed((()=>this.inValidIPAddressValueErrorInDialog().length>0)),this.onUpdateIPAddress=e=>{this.ipAddresses.removeAll(),this.inputIPAddress(""),document.getElementById("changeIPAddressDialogID").open();let t=this.getIPAddressList(this.ipAddress());if(t&&t.length>0)for(let e=0;e<t.length;e++)this.ipAddresses.push({id:e,item:t[e]})},this.showChangeACLRuleModule=t.observable(!1),this.getStorageConverter=e=>{let t;return t=e?new u.IntlNumberConverter({style:"decimal",minimumIntegerDigits:1,minimumFractionDigits:2,maximumFractionDigits:5,useGrouping:!1}):new u.IntlNumberConverter({style:"decimal",roundingMode:"HALF_DOWN",maximumFractionDigits:5,useGrouping:!1}),t},this.getOCPUConverter=e=>{let t;return t=e?new u.IntlNumberConverter({style:"decimal",minimumIntegerDigits:1,maximumFractionDigits:5,useGrouping:!1}):new u.IntlNumberConverter({style:"decimal",roundingMode:"HALF_DOWN",maximumFractionDigits:5,useGrouping:!1}),t},this.isValidOCPUNumber=e=>{let t=e.toString(),s=!0,a=t.indexOf(".");if(e<1){t.substring(a).length>2&&(s=!1)}else s=a<0;return s},this.onOCPUValueChanged=e=>{},this.onClearPageEvent=e=>{try{a.DataAccessService.instance.logInfo("OnclearPageEvent:"+JSON.stringify(e));const t=e.data;this.handleClearEvent(t)}catch(e){a.DataAccessService.instance.logError(e),c.MessagesService.getinstance().ShowMessage(o.LocalizedConstants.Instance.unableToClear)}},this.handleClearEvent=e=>{try{a.DataAccessService.instance.profileName=e.profileName,a.DataAccessService.instance.adbDatabaseID=e.adbDatabaseID,a.DataAccessService.instance.currentExecutionId=e.executionId,a.DataAccessService.instance.windowUri=e.windowUri,a.DataAccessService.instance.adbWorkLoadType=e.workloadType,this.initialize(),this.reInitializeACLModulePage&&this.reInitializeACLModulePageHandler(!0)}catch(e){a.DataAccessService.instance.logError(e),c.MessagesService.getinstance().ShowMessage(o.LocalizedConstants.Instance.unableToClear)}},this.isChangeModelSupported=()=>this.adbworkLoadType()==n.ADBworkLoadType.OLTP||this.adbworkLoadType()==n.ADBworkLoadType.DW||this.adbworkLoadType()==n.ADBworkLoadType.AJD,this.showChangeStorageUnit=()=>(this.adbworkLoadType()==n.ADBworkLoadType.OLTP||this.adbworkLoadType()==n.ADBworkLoadType.AJD)&&this.sharedDeploymentType()&&this.computeModelType()==n.ADBComputeModel.ECPU,this.changeComputeModelHandler=e=>{e.detail&&(this.resetOCPULimits(),this.resetOCPUCountAndLabel(),this.resetStorage(),this.resetStorageErrorLabel(this.storage()),this.ocpuError(""))},this.storageUnitchangeHandler=e=>{e.detail&&(this.StorageUnit()==n.ADBStorageUnit.GB?(this.storage(m.defaultStorageInGB),this.storageLabel(o.LocalizedConstants.Instance.storageInGB)):(this.storage(m.defaultStorageInTB),this.storageLabel(o.LocalizedConstants.Instance.storageinTB)),this.storageError(""))},this.resetStorageLimit=()=>{this.isDedicated()?this.minStorage(m.minDedicatedStorage):this.StorageUnit()==n.ADBStorageUnit.GB?this.minStorage(m.minStorageforGBForSharedATP_JSON_ECPU):this.minStorage(m.minStorageforTB)},p=this,p.whitelistedIps=new Array,p.alwaysFree=t.observableArray(),p.mTLSConnection=t.observableArray(),p.autoScaling=t.observableArray(),p.autoScalingForStorage=t.observableArray(),p.dbVersionListForWorkload=new n.dbVersionsForWorkloadNode,p.handlers=new Map,p.handlers.set(i.MessageName.themeChanged,p.onThemeChanged),p.handlers.set(i.MessageName.clearPageEvent,p.onClearPageEvent),p.handlers.set(i.MessageName.odtConfigChanged,p.onConfigChanged),p.handlers.set(i.MessageName.initializeCreateNewAutonomousDBPageResponseMessage,p.onCreateNewAutonomousDBInitializationDataReceived),p.handlers.set(i.MessageName.autonomousContainerDBResponseMessage,p.onAutonomousContainerDatabasesReceived),p.handlers.set(i.MessageName.createNewAutonomousDBResponseMessage,p.onCreateNewAutonomousDBResponseReceived),p.handlers.set(i.MessageName.usedADBNamesUpdatedMessage,p.onUsedADBNamesUpdatedMessage),p.handlers.set(i.MessageName.ociGetPublicIPAddressResponseMessage,p.onPublicIPAddressReceived),p.decimalStorageHalfDownConverter(p.getStorageConverter(!1)),a.DataAccessService.instance.subscribe((e=>{if(e&&this.handlers.get(e.type)){const t=this.handlers.get(e.type);t&&t(e)}else a.DataAccessService.instance.logError(`Could not find handler for message ${e.type}`)})),a.DataAccessService.instance.logInfo("Fetching Localized resources "),a.DataAccessService.instance.getLocalizedData().done((e=>{a.DataAccessService.instance.logInfo("Fetched localized resources."),o.LocalizedConstants.Instance.Configure(e)})).fail((e=>{a.DataAccessService.instance.logError("Localized resources "+JSON.stringify(e))})),l.setContrast()}setOCPUError(e){if(this.ocpuError(""),this.deploymentType()==n.ADBDeploymentType.SharedInfrastructure){let t=Number(e).valueOf();switch(this.computeModelType()){case n.ADBComputeModel.OCPU:t<m.minSharedInfraOCPUCount&&this.ocpuError(this.createADBUILabelText.ocpuErrorForSharedDeployment);break;case n.ADBComputeModel.ECPU:t<m.minSharedECPUCount&&this.ocpuError(this.createADBUILabelText.ecpuErrorForSharedDeployment)}}}updatePageTitle(e){a.DataAccessService.instance.logInfo("Sending request to update webview page caption");var t=new i.MessageBase;t.type=i.MessageName.updateAutonomousDBNameRequestMessage;var s=new n.updateAutonomousDBNameRequest;s.executionId=a.DataAccessService.instance.currentExecutionId,s.windowUri=a.DataAccessService.instance.windowUri,s.dbName=e,t.data=s;try{a.DataAccessService.instance.send(t),a.DataAccessService.instance.logInfo("Successfully placed request to update webview page caption")}catch(e){a.DataAccessService.instance.logError(e)}}setPswdMismatchError(e,t){0==t.length?this.pswdMismatchError(""):this.pswdMismatchError(this.passwordMatches(e,t)?"":this.createADBUILabelText.pswdMismatch)}passwordMatches(e,t){return e===t}validPswd(e){let t=new RegExp('^(?=(.*[0-9]){1,})(?=(.*[a-z]){1,})(?=(.*[A-Z]){1,})(?!(.*["]))(?!(.*[aA][dD][mM][iI][nN])).{12,30}$');return null!=e.match(t)}validDatabaseDisplayName(e){let t=new RegExp("^[a-zA-Z_](?!.*--)[a-zA-Z0-9_-]{0,}$");return null!=e.match(t)}get handlers(){return this.handlersField}set handlers(e){this.handlersField=e}setLicenseIncludedLicenseType(){this.licenseTypes.removeAll(),this.licenseTypes.push({value:n.ADBLicenseType.SubscribeToNewLicense,label:this.createADBUILabelText.licenseIncluded}),this.licenseTypes.push({value:n.ADBLicenseType.BringYourLicense,label:this.createADBUILabelText.bringyourOwnLicense}),this.licenseType(n.ADBLicenseType.SubscribeToNewLicense)}setDefaultLicenseType(){this.licenseTypes.removeAll(),this.licenseTypes.push({value:n.ADBLicenseType.BringYourLicense,label:this.createADBUILabelText.bringyourOwnLicense}),this.licenseTypes.push({value:n.ADBLicenseType.SubscribeToNewLicense,label:this.createADBUILabelText.licenseIncluded}),this.disableLicenseTypesOption(!1)}updateLicenseType(e,t){e||t==n.ADBworkLoadType.AJD||this.isDedicated()?(this.setLicenseIncludedLicenseType(),this.disableLicenseTypesOption(!0)):this.setDefaultLicenseType()}setOnlySharedDeploymentType(){this.deploymentTypes.push({value:n.ADBDeploymentType.SharedInfrastructure,label:this.createADBUILabelText.sharedInfrastructure}),this.deploymentType(n.ADBDeploymentType.SharedInfrastructure),this.disableDeploymentTypesOption(!0)}setDefaultDeploymentTypes(){this.deploymentTypes.push({value:n.ADBDeploymentType.SharedInfrastructure,label:this.createADBUILabelText.sharedInfrastructure}),this.deploymentTypes.push({value:n.ADBDeploymentType.DedicatedInfrastructure,label:this.createADBUILabelText.dedicatedInfrastructure}),this.deploymentType(n.ADBDeploymentType.SharedInfrastructure),this.disableDeploymentTypesOption(!1)}updateDeploymentType(e,t){this.deploymentTypes.removeAll(),e||t==n.ADBworkLoadType.AJD?this.setOnlySharedDeploymentType():this.setDefaultDeploymentTypes()}populateSupportedDatabaseVersionComboBox(e,t){this.databaseVersions.removeAll();let s=this.dbVersionListForWorkload.getSupportedDBVersionList(e,t);if(0==s.length)this.databaseVersions.push({value:this.createADBUILabelText.noDatabaseVersionAvailable,label:this.createADBUILabelText.noDatabaseVersionAvailable}),this.databaseVersion(this.createADBUILabelText.noDatabaseVersionAvailable);else{for(let e=0;e<s.length;e++)this.databaseVersions.push({value:s[e],label:s[e]});this.databaseVersion(s[0])}}onConfigChanged(e){const t=e.data;a.DataAccessService.instance.updatedConfig(t)}get messagesDataprovider(){return c.MessagesService.getinstance().messagesDataproviderField}getIPAddressList(e){let t=null;return e&&e.length>0&&(t=new Array,e.split(",").forEach((e=>{e&&e.trim().length>0&&t.push(e.trim())}))),t}validIPAddress(e){let t=!0,s=this.getIPAddressList(e);if(s){if(0==s.length)return!0;let e=new RegExp("^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$");for(let a=0;a<s.length;a++)if(null==s[a].match(e)){t=!1;break}}return t}validFractionValues(e){let t=!0;switch(e){case.1:case.2:case.3:case.4:case.5:case.6:case.7:case.8:case.9:t=!0;break;default:t=!1}return t}resetOCPULimits(){let e=this.computeModelType()==n.ADBComputeModel.OCPU?m.minSharedInfraOCPUCount:m.minSharedECPUCount,t=m.integerOCPUCountStep;p.ocpuStep(t),p.minCPUCoreCount(e)}resetStorageLimits(){let e=this.computeModelType()==n.ADBComputeModel.OCPU?m.minSharedInfraOCPUCount:m.minSharedECPUCount,t=m.integerOCPUCountStep;p.ocpuStep(t),p.minCPUCoreCount(e)}resetStorage(e=!0){if(!this.isAlwaysFree())if(this.resetStorageLimit(),this.isDedicated())this.StorageUnit(n.ADBStorageUnit.GB),this.storageLabel(o.LocalizedConstants.Instance.storageInGB),this.adbworkLoadType()==n.ADBworkLoadType.DW?this.storage(m.minDefaultDedicatedStorage):this.adbworkLoadType()==n.ADBworkLoadType.OLTP&&this.storage(m.minDedicatedStorage);else if(this.computeModelType()==n.ADBComputeModel.ECPU)switch(this.adbworkLoadType()){case n.ADBworkLoadType.OLTP:case n.ADBworkLoadType.AJD:this.StorageUnit(n.ADBStorageUnit.GB),this.storage(m.defaultStorageInGB),this.storageLabel(o.LocalizedConstants.Instance.storageInGB);break;case n.ADBworkLoadType.DW:this.StorageUnit(n.ADBStorageUnit.TB),this.storage(m.defaultStorageInTB),this.storageLabel(o.LocalizedConstants.Instance.storageinTB)}else this.StorageUnit(n.ADBStorageUnit.TB),this.storage(m.defaultStorageInTB),this.storageLabel(o.LocalizedConstants.Instance.storageinTB)}resetStorageErrorLabel(e){if(this.storageError(""),this.isAlwaysFree())this.storageError("");else{let t=isNaN(e),s=!t&&Number.isInteger(Number(e).valueOf()),a=t?0:Number(e).valueOf();if(this.sharedDeploymentType())if(p.computeModelType()==n.ADBComputeModel.ECPU)switch(this.adbworkLoadType()){case n.ADBworkLoadType.OLTP:case n.ADBworkLoadType.AJD:this.StorageUnit()==n.ADBStorageUnit.TB?(t||!s||a<m.minStorageforTB)&&this.storageError(this.createADBUILabelText.storageErrorForECPUATPSharedDeployment):(t||!s||a<m.minStorageforGBForSharedATP_JSON_ECPU)&&this.storageError(this.createADBUILabelText.storageErrorForECPUATPSharedDeployment);break;case n.ADBworkLoadType.DW:(t||!s||a<m.minStorageforTBForSharedDW_ECPU)&&this.storageError(this.createADBUILabelText.storageErrorForECPUDWSharedDeployment)}else(t||!s||a<m.minStorageforTBForShared_OCPU)&&this.storageError(this.createADBUILabelText.storageErrorForSharedDeployment);else(t||!s||a<m.minDedicatedStorage)&&this.storageError(this.createADBUILabelText.storageErrorForDedicatedDeployment)}}populateOCPUECPUCount(e){if(this.ecpuOCPUCounts.removeAll(),this.ecpuOCPUCount(""),e&&e.length>0){for(let t=0;t<e.length;t++)this.ecpuOCPUCounts.push({value:e[t],label:e[t]});this.ecpuOCPUCount(e[0]),this.cpuAvailabelForSelectedContainer(!0)}else this.ecpuOCPUCount(this.createADBUILabelText.dedicatedADBWithNoComputeResources),this.cpuAvailabelForSelectedContainer(!1)}resetOCPUCountAndLabel(){if(this.deploymentType()==n.ADBDeploymentType.SharedInfrastructure)switch(this.computeModelType()){case n.ADBComputeModel.OCPU:p.cpuCountLabel(o.LocalizedConstants.Instance.cpuCoreCount),p.cpuCoreCount(m.defaultOCPUCount);break;case n.ADBComputeModel.ECPU:p.cpuCountLabel(o.LocalizedConstants.Instance.ecpuCount),p.cpuCoreCount(m.defaultECPUCount)}else p.cpuCountLabel(o.LocalizedConstants.Instance.cpuCoreCount)}resetComputeModelToECPU(){this.isDedicated()||this.computeModelType(n.ADBComputeModel.ECPU)}}}));