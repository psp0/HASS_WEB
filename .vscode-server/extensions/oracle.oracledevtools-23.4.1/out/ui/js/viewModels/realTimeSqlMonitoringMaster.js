define(["require","exports","knockout","ojs/ojconverter-datetime","../common/scriptExecutionModels","../common/dataAccessService","../common/localizedConstants","ojs/ojconverter-nativenumber","ojs/ojarraydataprovider","../utilities","ojs/ojarraydataprovider","ojs/ojdatagrid","ojs/ojtable","ojs/ojbutton","ojs/ojknockout","ojs/ojmenu","ojs/ojselectcombobox","ojs/ojformlayout","ojs/ojlabelvalue","ojs/ojgauge","ojs/ojprogress-circle","ojs/ojchart","ojs/ojcheckboxset"],(function(require,e,t,s,r,a,i,o,l,n){"use strict";let d;const c=100;return class{constructor(e){this.rtsmMasterDataRaw=[],this.rtsmMasterData=t.observableArray().extend({deferred:!0}),this.rstmDurationSeriesDataArray=new Array(c),this.rstmDbTimeSeriesDataArray=new Array(c),this.rstmIORequestsSeriesDataArray=new Array(c),this.rstmDurationSeriesProviderArray=new Array(c),this.rstmDbTimeSeriesProviderArray=new Array(c),this.rstmIORequestsSeriesProviderArray=new Array(c),this.rtsmId=null,this.rtsmMaxValues=new Map,this.lc=i.LocalizedConstants.Instance,this.rtsmTableUpdateCount=t.observable(0),this.refreshTimerId=null,this.nc=new o.NumberConverter({decimalFormat:"short",maximumFractionDigits:3}),this.rtsmTable=null,this.tableColumns=[{headerText:this.lc.rtsmTableHeaderStatus,field:"status",headerClassName:"oj-typography-body-md",className:"oj-typography-body-md",sortable:"enabled",resizable:"enabled",width:"80px",id:"status"},{headerText:this.lc.rtsmTableHeaderDuration,field:"duration",headerClassName:"oj-typography-body-md",className:"oj-typography-body-md",sortable:"enabled",resizable:"enabled",width:"100px",id:"duration"},{headerText:this.lc.rtsmTableHeaderLastActiveTime,field:"last_refresh_time",headerClassName:"oj-typography-body-md",className:"oj-typography-body-md",sortable:"enabled",resizable:"enabled",width:"130px",id:"last_refresh_time"},{headerText:this.lc.rtsmTableHeaderSqlId,field:"sql_id",headerClassName:"oj-typography-body-md",className:"oj-typography-body-md",sortable:"enabled",resizable:"enabled",width:"130px",id:"sql_id"},{headerText:this.lc.rtsmTableHeaderSqlPlanHash,field:"plan_hash",headerClassName:"oj-typography-body-md",className:"oj-typography-body-md",sortable:"disabled",resizable:"enabled",width:"95px",id:"plan_hash"},{headerText:this.lc.rtsmTableHeaderUserName,field:"user",headerClassName:"oj-typography-body-md",className:"oj-typography-body-md",sortable:"enabled",resizable:"enabled",width:"110px",id:"user"},{headerText:this.lc.rtsmTableHeaderParallel,field:"dop",headerClassName:"oj-typography-body-md",className:"oj-typography-body-md",width:"60px",sortable:"disabled",resizable:"enabled",id:"dop"},{headerText:this.lc.rtsmTableHeaderDatabaseTime,field:"elapsed_time",headerClassName:"oj-typography-body-md",className:"oj-typography-body-md",sortable:"enabled",resizable:"enabled",width:"120px",id:"elapsed_time"},{headerText:this.lc.rtsmTableHeaderIORequests,field:"read_write_reqs",headerClassName:"oj-typography-body-md",className:"oj-typography-body-md",sortable:"enabled",resizable:"enabled",width:"120px",id:"read_write_reqs"},{headerText:this.lc.rtsmTableHeaderSqlText,field:"sql_text",headerClassName:"oj-typography-body-md",className:"oj-typography-body-md",sortable:"enabled",resizable:"enabled",width:"240px",id:"sql_text"}],this.saveMenuItems=[{id:"saveActiveReport",label:this.lc.rtsmMenuSaveAsActiveReport,detail:this.lc.rtsmMenuSaveAsActiveReportDetail,icon:"oj-ux-ico-save",disabled:!1},{id:"saveXML",label:this.lc.rtsmMenuSaveAsXML,detail:this.lc.rtsmMenuSaveAsXMLDetail,icon:"oj-ux-ico-save",disabled:!1}],this.openReportDisabledState=t.observable(!1),this.copyRowDisabledState=t.observable(!1),this.contextMenuItems=[{id:"openDetailedReport",label:this.lc.rtsmTableContextMenuLabelOpenReport,detail:this.lc.rtsmTableContextMenuDetailOpenReport,icon:"oj-ux-ico-open",disabled:this.openReportDisabledState},{id:"copyReportRow",label:this.lc.rtsmTableContextMenuLabelCopyRow,detail:this.lc.rtsmTableContextMenuDetailCopyRow,icon:"oj-ux-ico-copy",disabled:this.copyRowDisabledState},{id:"sortAscending",label:this.lc.rtsmTableContextMenuLabelSortAscending,detail:this.lc.rtsmTableContextMenuDetailSortAscending,icon:"oj-ux-ico-sort-relevance-low",disabled:!1,command:"oj-table-sortAsc"},{id:"sortDescending",label:this.lc.rtsmTableContextMenuLabelSortDescending,detail:this.lc.rtsmTableContextMenuDetailSortDescending,icon:"oj-ux-ico-sort-relevance-high",disabled:!1,command:"oj-table-sortDsc"}],this.contentFrozen=t.observableArray([]),this.refreshValue=t.observable("0"),this.refreshOptions=[{id:"60",label:this.lc.rtsmRefreshTimeout60Sec,detail:this.lc.rtsmRefreshTimeoutDetail+this.lc.rtsmRefreshTimeout60Sec,icon:"oj-ux-ico-replay",disabled:!1},{id:"300",label:this.lc.rtsmRefreshTimeout300Sec,detail:this.lc.rtsmRefreshTimeoutDetail+this.lc.rtsmRefreshTimeout300Sec,icon:"oj-ux-ico-replay",disabled:!1},{id:"1800",label:this.lc.rtsmRefreshTimeout1800Sec,detail:this.lc.rtsmRefreshTimeoutDetail+this.lc.rtsmRefreshTimeout1800Sec,icon:"oj-ux-ico-replay",disabled:!1},{id:"0",label:this.lc.rtsmRefreshTimeout0Sec,detail:this.lc.rtsmRefreshTimeoutOffDetail,icon:"oj-ux-ico-radio-button-off",disabled:!1}],this.activityTimeValue=t.observable("86400"),this.activityTimeOptions=[{id:"3600",label:this.lc.rtsmActivityTimeOneHour,detail:this.lc.rtsmActivityTimeOneHourTooltip,icon:"oj-ux-ico-clock-history",disabled:!1},{id:"21600",label:this.lc.rtsmActivityTimeSixHours,detail:this.lc.rtsmActivityTimeSixHoursTooltip,icon:"oj-ux-ico-clock-history",disabled:!1},{id:"43200",label:this.lc.rtsmActivityTimeTwelveHours,detail:this.lc.rtsmActivityTimeTwelveHoursTooltip,icon:"oj-ux-ico-clock-history",disabled:!1},{id:"86400",label:this.lc.rtsmActivityTimeTwentyFourHours,detail:this.lc.rtsmActivityTimeTwentyFourHoursTooltip,icon:"oj-ux-ico-radio-button-off",disabled:!1}],this.top100Value=t.observable("LAST_ACTIVE_TIME"),this.top100Options=[{id:"DURATION",label:this.lc.rtsmTop100ByDuration,detail:this.lc.rtsmTop100ByDurationTooltip,icon:"oj-ux-ico-radio-button-off",disabled:!1},{id:"LAST_ACTIVE_TIME",label:this.lc.rtsmTop100ByEndTime,detail:this.lc.rtsmTop100ByEndTimeTooltip,icon:"oj-ux-ico-radio-button-off",disabled:!1},{id:"DB_TIME",label:this.lc.rtsmTop100ByDatabaseTime,detail:this.lc.rtsmTop100ByDatabaseTimeTooltip,icon:"oj-ux-ico-radio-button-off",disabled:!1},{id:"CPU_TIME",label:this.lc.rtsmTop100ByCPUTime,detail:this.lc.rtsmTop100ByCPUTimeTooltip,icon:"oj-ux-ico-radio-button-off",disabled:!1},{id:"IO_REQUESTS",label:this.lc.rtsmTop100ByIORequests,detail:this.lc.rtsmTop100ByIORequestsTooltip,icon:"oj-ux-ico-radio-button-off",disabled:!1},{id:"IO_BYTES",label:this.lc.rtsmTop100ByIOBytes,detail:this.lc.rtsmTop100ByIOBytesTooltip,icon:"oj-ux-ico-radio-button-off",disabled:!1}],this.dateConverter=new s.IntlDateTimeConverter({formatType:"date",dateFormat:"full"}),this.selectedTableMenuItem=t.observable(),this.rtsmMasterTableAction=async e=>{let t=e.detail.selectedValue;d.selectedTableMenuItem(t);let s=this.launchedFromTableRow();if(s)switch(t){case"openDetailedReport":await d.OpenRTSMDetailsPanelXML(s);break;case"copyReportRow":await d.CopySelectedRtsmRow(s)}},this.launchedFromTableRow=t.observable(),this.rtsmMasterTableBeforeOpen=async e=>{const t=e.detail.originalEvent.target,s=e.currentTarget.parentElement.getContextByNode(t);if(null!=s)if("oj-table-header"===s.subId)this.launchedFromTableRow(null),this.openReportDisabledState(!0),this.copyRowDisabledState(!0);else if("oj-table-cell"===s.subId){let e=new Set;e.add(s.key);let t=(await this.rtsmMasterDataProvider.fetchByKeys({keys:e})).results.get(s.key).data;this.launchedFromTableRow(t),this.openReportDisabledState(!1),this.copyRowDisabledState(!1)}},this.CopySelectedRtsmRow=async e=>{let t=JSON.stringify(e);n.copyToClipBoard(t)},this.saveDetailedReportXML=async e=>{let t="ACTIVE";switch(e.detail.selectedValue){case"saveText":t="TEXT";break;case"saveHTML":t="HTML";break;case"saveXML":t="XML";break;case"saveActiveReport":t="ACTIVE"}await d.SaveSelectedReportXML(t)},this.updatedRefreshValue=this.refreshValue(),this.updateRefreshValue=e=>{let t=e.detail;this.updatedRefreshValue=t.value,"0"===t.value?this.contentFrozen(["frozen"]):this.contentFrozen([])},this.refreshMasterTableXML=this.RefreshMasterTableXML,this.sqlIdActionClick=this.SqlIdActionClick,this.sqlIdActionEvent=this.SqlIdActionEvent,this.tableAnimateStart=function(e){e.preventDefault(),e.detail.endCallback()},this.DateComparator=(e,t)=>{if(e===t)return 0;return new Date(e).getTime()<new Date(t).getTime()?-1:1},this.NumberComparator=(e,t)=>{let s=+e,r=+t;return s===r?0:s<r?-1:1},this.StringComparator=(e,t)=>e.localeCompare(t),d=this;for(let e=0;e<c;e++)this.rstmDurationSeriesDataArray[e]=t.observableArray([]),this.rstmDbTimeSeriesDataArray[e]=t.observableArray([]),this.rstmIORequestsSeriesDataArray[e]=t.observableArray([]),this.rstmDurationSeriesProviderArray[e]=new l(this.rstmDurationSeriesDataArray[e],{keyAttributes:"@index"}),this.rstmDbTimeSeriesProviderArray[e]=new l(this.rstmDbTimeSeriesDataArray[e],{keyAttributes:"@index"}),this.rstmIORequestsSeriesProviderArray[e]=new l(this.rstmIORequestsSeriesDataArray[e],{keyAttributes:"@index"});d.updateLocalSettings(e),t.options.useOnlyNativeEvents=!0,window.addEventListener("message",(async e=>{const t=e.data;if("refresh_master_table"===t.command)this.onRefreshMasterTable(t.data)})),this.rtsmId=parseInt(a.DataAccessService.instance.getElementValue("rtsmId")),this.rtsmMasterDataProvider=new l(this.rtsmMasterData,{keyAttributes:["sql_id","sql_exec_id","sql_exec_start"],sortComparators:{comparators:(new Map).set("last_refresh_time",this.DateComparator).set("duration",this.NumberComparator).set("elapsed_time",this.NumberComparator).set("sql_id",this.StringComparator).set("user",this.StringComparator).set("sql_text",this.StringComparator).set("status",this.StringComparator)}}),this.classesFreezeContentIcon=t.computed(this.GetFreezeIcon,this),this.RefreshMasterTableXML();let r=parseInt(this.refreshValue());0!==r&&(this.refreshTimerId=setInterval((()=>{this.RefreshMasterTableXML()}),1e3*r))}async getRTSMListFromXml(e){let t,s,r,a,i=new Array,o=jQuery.parseXML(e),l=jQuery("sql",o);for(let e of l){t=new Object;for(let s=0;s<e.attributes.length;s++)a=e.attributes[s],t[a.name]=a.value;for(let s of jQuery(":not(stats, stat)",e)){r=s.nodeName,t[r]=s.innerHTML;for(let e=0;e<s.attributes.length;e++)a=s.attributes[e],t[`${r}_${a.name}`]=a.value}if(s=jQuery('stats,[type="monitor"]',e),s.length){s=s[0],s=jQuery("stat",s);for(let e of s)t[e.getAttribute("name")]=e.innerHTML}let o=t.read_reqs?+t.read_reqs:0,l=t.write_reqs?+t.write_reqs:0;t.read_write_reqs=o+l,t.user||(t.user=""),i.push(t)}return i.length>c&&(i=i.slice(0,c)),i}async OpenRTSMDetailsPanelXML(e){const t=new r.MessageBase;t.type=r.MessageName.rtsmActionRequest;const s=new r.RTSMRequestParameters;s.command="detail_report",s.rtsmId=d.rtsmId,s.sqlId=e.sql_id,s.sqlExecId=e.sql_exec_id,s.sqlExecStart=e.sql_exec_start,t.data=s,a.DataAccessService.instance.send(t)}async GetRtsmMinMaxValuesForColumn(e){let t,s=0;for(let r of this.rtsmMasterDataRaw)t=+r[e],t>s&&(s=t);this.rtsmMaxValues[e]=s}async GetRtsmMasterMinMaxValues(){this.GetRtsmMinMaxValuesForColumn("duration"),this.GetRtsmMinMaxValuesForColumn("elapsed_time"),this.GetRtsmMinMaxValuesForColumn("read_write_reqs")}GetRtsmDbTimeTooltipForRow(e){let t=e.cpu_time?e.cpu_time/1e3:0,s=e.user_io_wait_time?e.user_io_wait_time/1e3:0,r=e.application_wait_time?e.application_wait_time/1e3:0,a=e.concurrency_wait_time?e.concurrency_wait_time/1e3:0,i=e.plsql_exec_time?e.plsql_exec_time/1e3:0,o=e.other_wait_time?e.other_wait_time/1e3:0,l=t+s+o+r+a,n="";return t>0&&(n+=`${this.lc.rtsmDbTimeTooltipCpuTime} ${(t/1e3).toFixed(2)} ${this.lc.rtsmTooltipSeconds} (${(100*t/l).toFixed(2)}%)\n`),s>0&&(n+=`${this.lc.rtsmDbTimeTooltipUserIOWaitTime} ${(s/1e3).toFixed(2)} ${this.lc.rtsmTooltipSeconds} (${(100*s/l).toFixed(2)}%)\n`),r>0&&(n+=`${this.lc.rtsmDbTimeTooltipApplicationWaitTime} ${(r/1e3).toFixed(2)} ${this.lc.rtsmTooltipSeconds} (${(100*r/l).toFixed(2)}%)\n`),a>0&&(n+=`${this.lc.rtsmDbTimeTooltipConcurrencyWaitTime} ${(a/1e3).toFixed(2)} ${this.lc.rtsmTooltipSeconds} (${(100*a/l).toFixed(2)}%)\n`),o>0&&(n+=`${this.lc.rtsmDbTimeTooltipOtherWaitTime} ${(o/1e3).toFixed(2)} ${this.lc.rtsmTooltipSeconds} (${(100*o/l).toFixed(2)}%)\n`),i>0&&(n+=`${this.lc.rtsmDbTimeTooltipPLSQLExecutionTime} ${(i/1e3).toFixed(2)} ${this.lc.rtsmTooltipSeconds}`),n}GetRtsmDbTimeSeriesForRow(e,t){let s=e.cpu_time?e.cpu_time/1e3:0,r=e.user_io_wait_time?e.user_io_wait_time/1e3:0,a=e.application_wait_time?e.application_wait_time/1e3:0,i=e.concurrency_wait_time?e.concurrency_wait_time/1e3:0,o=(e.plsql_exec_time&&e.plsql_exec_time,e.other_wait_time?e.other_wait_time/1e3:0),l=s+r+o+a+i,n=d.GetRtsmDbTimeTooltipForRow(e),c=[{id:"cpu_time",value:s,color:"lightgreen",shortDesc:n,series:1},{id:"user_io_wait_time",value:r,color:"cornflowerblue",shortDesc:n,series:2},{id:"application_wait_time",value:a,color:"coral",shortDesc:n,series:3},{id:"concurrency_wait_time",value:i,color:"slateblue",shortDesc:n,series:4},{id:"other_wait_time",value:o,color:"lightcyan",shortDesc:n,series:6},{id:"elapsed_time",value:this.rtsmMaxValues.elapsed_time/1e3-l,color:"transparent",shortDesc:n,series:7}];return d.rstmDbTimeSeriesDataArray[t](c),d.rstmDbTimeSeriesProviderArray[t]}GetRtsmIORequestsTooltipForRow(e){let t=e.read_reqs?+e.read_reqs:0,s=e.write_reqs?+e.write_reqs:0,r=e.buffer_gets?+e.buffer_gets:0,a=e.user_fetch_count?+e.user_fetch_count:0,i=e.read_bytes?+e.read_bytes:0,o=e.write_bytes?+e.write_bytes:0,l=e.read_write_reqs,n="";return t>0&&(n+=`${this.lc.rtsmIORequestsTooltipReadRequests} ${t} (${(100*t/l).toFixed(2)}%)\n`),s>0&&(n+=`${this.lc.rtsmIORequestsTooltipWriteRequests} ${s} (${(100*s/l).toFixed(2)}%)\n`),r>0&&(n+=`${this.lc.rtsmIORequestsTooltipBufferGets} ${this.nc.format(r)}\n`),a>0&&(n+=`${this.lc.rtsmIORequestsTooltipUserFetchCount} ${this.nc.format(a)}\n`),i>0&&(n+=`${this.lc.rtsmIORequestsTooltipReadBytes} ${this.nc.format(i)}\n`),o>0&&(n+=`${this.lc.rtsmIORequestsTooltipWriteBytes} ${this.nc.format(o)}\n`),n}GetRtsmIORequestsSeriesForRow(e,t){let s=e.read_reqs?+e.read_reqs:0,r=e.write_reqs?+e.write_reqs:0,a=(e.buffer_gets&&e.buffer_gets,e.user_fetch_count&&e.user_fetch_count,e.read_bytes&&e.read_bytes,e.write_bytes&&e.write_bytes,e.read_write_reqs),i=d.GetRtsmIORequestsTooltipForRow(e),o=[{id:"read_reqs",value:s,color:"orange",shortDesc:i,series:1},{id:"write_reqs",value:r,color:"orangered",shortDesc:i,series:2},{id:"remaining_reqs",value:this.rtsmMaxValues.read_write_reqs-a,color:"transparent",shortDesc:i,series:3}];return d.rstmIORequestsSeriesDataArray[t](o),d.rstmIORequestsSeriesProviderArray[t]}GetRtsmTotalIORequestsForRow(e){return(e.read_reqs?e.read_reqs:0)+(e.write_reqs?e.write_reqs:0)}GetRtsmDurationTooltipForRow(e){let t="";return e.sql_exec_start&&(t+=`${this.lc.rtsmDurationTooltipStartTime} ${e.sql_exec_start}\n`),e.last_refresh_time&&(t+=`${this.lc.rtsmDurationTooltipEndTime} ${e.last_refresh_time}\n`),t+=`${this.lc.rtsmDurationTooltipRunningDuration} ${e.duration} ${this.lc.rtsmTooltipSeconds}`,t}GetRtsmDurationSeriesForRow(e,t){let s=e.duration?+e.duration:0,r=d.GetRtsmDurationTooltipForRow(e),a=[{id:"duration",value:s,color:"lightsteelblue",shortDesc:r,series:1},{id:"total_time",value:this.rtsmMaxValues.duration-s,color:"transparent",shortDesc:r,series:2}];return d.rstmDurationSeriesDataArray[t](a),d.rstmDurationSeriesProviderArray[t]}GetTooltipForUser(e){let t="";return e.session_id&&(t+=`${this.lc.rtsmUserTooltipSessionID} ${e.session_id}\n`),e.session_serial&&(t+=`${this.lc.rtsmUserTooltipSessionSerialNo} ${e.session_serial}\n`),e.user_id&&(t+=`${this.lc.rtsmUserTooltipUserID} ${e.user_id}\n`),e.module&&(t+=`${this.lc.rtsmUserTooltipModule} ${e.module}\n`),e.action&&(t+=`${this.lc.rtsmUserTooltipAction} ${e.action}\n`),e.service&&(t+=`${this.lc.rtsmUserTooltipService} ${e.service}\n`),e.program&&(t+=`${this.lc.rtsmUserTooltipProgram} ${e.program}\n`),e.con_name&&(t+=`${this.lc.rtsmUserTooltipContainerName} ${e.con_name}`),t}GetFreezeIcon(){return 0===this.contentFrozen().length?("0"===this.updatedRefreshValue&&(this.updatedRefreshValue="60"),this.refreshValue(this.updatedRefreshValue),"oj-ux-ico-pin"):(this.refreshValue("0"),"oj-ux-ico-unpin")}async RefreshMasterTableXML(){const e=new r.MessageBase;e.type=r.MessageName.rtsmActionRequest;const t=new r.RTSMRequestParameters;return t.active_since_sec=d.activityTimeValue(),t.top_n_rankby=d.top100Value(),t.command="refresh_master_table",t.rtsmId=d.rtsmId,e.data=t,await a.DataAccessService.instance.send(e)}async SaveSelectedReportXML(e){const t=new r.MessageBase;t.type=r.MessageName.rtsmActionRequest;const s=new r.RTSMRequestParameters;s.command="save_report",s.rtsmId=d.rtsmId,s.saveReportType=e;let i=d.rtsmTable.selected.row.values();if(0===i.size)s.sqlId=null,s.sqlExecId=null,s.sqlExecStart=null;else{let e=await d.rtsmMasterDataProvider.fetchByKeys({keys:i}),t=null;for(let s of i){t=e.results.get(s).data;break}s.sqlId=t.sql_id,s.sqlExecId=t.sql_exec_id,s.sqlExecStart=t.sql_exec_start}t.data=s,a.DataAccessService.instance.send(t)}async MasterTableInitialized(){const e=new r.MessageBase;e.type=r.MessageName.rtsmActionRequest;const t=new r.RTSMRequestParameters;return t.command="master_table_initialized",t.rtsmId=d.rtsmId,e.data=t,await a.DataAccessService.instance.send(e)}async onRefreshMasterTable(e){this.rtsmMasterDataRaw=await this.getRTSMListFromXml(e),0!=this.rtsmMasterDataRaw.length&&this.rtsmMasterData(this.rtsmMasterDataRaw),this.GetRtsmMasterMinMaxValues(),this.rtsmTableUpdateCount(this.rtsmTableUpdateCount()+1)}async SqlIdActionClick(e){let t=e[0];await d.OpenRTSMDetailsPanelXML(t[0])}async SqlIdActionEvent(e,t){if(" "===t.key||"Enter"===t.key){t.stopImmediatePropagation();let s=e[0];await d.OpenRTSMDetailsPanelXML(s[0])}}async UpdateSettingsHandler(e){await d.UpdateMasterTableParameters(),await d.RefreshMasterTableXML()}async UpdateRefreshSettingsHandler(e){await d.UpdateMasterTableParameters(),null!==d.refreshTimerId&&(clearInterval(d.refreshTimerId),d.refreshTimerId=null);let t=parseInt(e.detail.value);0!==t&&(d.refreshTimerId=setInterval((()=>{d.RefreshMasterTableXML()}),1e3*t))}async UpdateMasterTableParameters(){const e=new r.MessageBase;e.type=r.MessageName.rtsmActionRequest;const t=new r.RTSMRequestParameters;return t.active_since_sec=d.activityTimeValue(),t.top_n_rankby=d.top100Value(),t.refresh_interval=d.refreshValue(),t.command="update_master_table_parameters",t.rtsmId=d.rtsmId,e.data=t,await a.DataAccessService.instance.send(e)}updateLocalSettings(e){let t=JSON.parse(e);d.activityTimeValue(t.active_since_sec),d.top100Value(t.top_n_rankby),d.refreshValue(t.refresh_interval),d.updatedRefreshValue=t.refresh_interval,"0"===d.updatedRefreshValue&&d.contentFrozen(["frozen"])}viewConnected(e){if(!this.rtsmTable){let e=document.getElementById("rtsmMasterTable");this.rtsmTable=e}}}}));