define(["require","exports","knockout","../common/dataAccessService","../common/localizedConstants","../common/scriptExecutionModels","../utilities","../common/messageService","ojs/ojmodule-element-utils","signals","../common/models","ojs/ojbutton","ojs/ojcheckboxset","ojs/ojknockout","ojs/ojinputtext","ojs/ojformlayout","ojs/ojlabel","ojs/ojselectcombobox","ojs/ojmessage","ojs/ojmessages","ojs/ojcollapsible","ojs/ojlistview","ojs/ojprogress","ojs/ojprogress-circle","ojs/ojinputnumber"],(function(require,e,t,n,s,i,a,o,r,c,l){"use strict";return class{constructor(e){this.msgPos={my:{vertical:"top",horizontal:"end"},at:{vertical:"top",horizontal:"end"},of:"window"},this.messageHandlersField=new Map,this.showIndentSize=t.observable(!1),this.saveButtonDisable=t.observable(!0),this.invalidValues=t.observable(!1),this.isSaving=t.observable(!1),this.isFormatting=t.observable(!1),this.isExporting=t.observable(!1),this.isImporting=t.observable(!1),this.isPagePopulated=!1,this.textareaValue=t.observable("DECLARE\n\tvar_nam_1 NUMBER;\n\tvar_2     VARCHAR2;\n\tv3        custom_data_type;\nBEGIN\n /*sample comment*/\n\tNULL;\n --another sample comment\n\tproc1( );\n /*multi \n    line\n        comment */\n\tvar_2 := 1 * 4 - 9 + ( 33 );\n\tdbms_output.put_line( 'Name = '\n\t\t|| item.last_name\n\t\t|| ', Job = '\n\t\t|| item.job_id ); --cc\n\tdbms_lob.compare(\n\t\tlob_1 => p_,\n\t\tlob_2 => p_,\n\t\tamount => p_,\n\t\toffset_1 => p_,\n\t\toffset_2 => p_\n\t);\n\tdbms_output.put_line(\n\t\tCASE\n\t\t\tWHEN b IS NULL THEN\n\t\t\t\t'Unknown'\n\t\t\tWHEN b THEN\n\t\t\t\t'Yes'\n\t\t\tWHEN NOT b THEN\n\t\t\t\t'No'\n\t\tEND );\nEXCEPTION\n\tWHEN some_exception THEN\n\t\tdbms_output.put_line( 'some_exception' );\n\t\tdbms_output.put_line( 'additional_statement' );\n\tWHEN new_exception OR other_exception THEN\n\t\tdbms_output.put_line( 'new_exception' );\n\t\tdbms_output.put_line( 'additional_statement' );\n\tWHEN OTHERS THEN\n\t\tdbms_output.put_line( 'do nothing' );\n\t\tdbms_output.put_line( 'additional_statement' );\nEND;\n/\n\nSELECT\n\tcolumn_1      AS alias_1,\n\tcol2          a_2,\n\tc3            AS al_3,\n\tc4 || column5 AS ali_4\nFROM\n\tdepartments d,\n\temp         e\nWHERE\n\tsomething = something_else\n\t\tAND something_more = something_again\n\t\tAND something_else = something_more;\n\nSELECT\n\te.employee_id,\n\te.salary,\n\te.commission_pct\nFROM\n\temployees   e\n\tJOIN departments d\n\t\tUSING( department_id );"),this.tabSizeValue=s.LocalizedConstants.Instance.sameAsVSCodeSetting,this.insertSpacesValue=s.LocalizedConstants.Instance.sameAsVSCodeSetting,this.indentSizeValue=s.LocalizedConstants.Instance.sameAsVSCodeSetting,this.selectedKeywordCasing=t.observable(i.Casing.SameAsIntellisense),this.selectedIdentifierCasing=t.observable(i.Casing.SameAsIntellisense),this.selectedLineCommentType=t.observable(i.SingleLineCommentFormatType.KeepUnchanged),this.selectedLineBrkBtwnStmts=t.observable(2),this.selectedLineBrkOnComma=t.observable(i.LineBreakPosition.After),this.selectedLineBrkOnConcat=t.observable(i.LineBreakPosition.Before),this.selectedLineBrkOnBoolConn=t.observable(i.LineBreakPosition.Before),this.enableANSIJoinLineBrk=t.observable(!0),this.enableLineBrkBeforeComment=t.observable(!1),this.enableLineBrkAfterSelect=t.observable(!0),this.selectedLineBrkOnIfCaseWhile=t.observable(i.IfCaseWhileFormatType.IndentedActionInlinedCondition),this.selectedwsAroundOper=t.observable(i.WhiteSpaceSetting.Default),this.enableWsAfterCommas=t.observable(!0),this.selectedWsAroundParen=t.observable(i.WhiteSpaceSetting.Default),this.commasPerLineValue=t.observable(1),this.spacesInsideValue=t.observable(1),this.spacesOutsideValue=t.observable(1),this.casingTypes=t.observableArray([{value:i.Casing.SameAsIntellisense,label:s.LocalizedConstants.Instance.sameAsIntellisense},{value:i.Casing.Uppercase,label:s.LocalizedConstants.Instance.upperCase},{value:i.Casing.Lowercase,label:s.LocalizedConstants.Instance.lowerCase},{value:i.Casing.Titlecase,label:s.LocalizedConstants.Instance.titleCase},{value:i.Casing.None,label:s.LocalizedConstants.Instance.noChange}]),this.singleLineCommentOptions=t.observableArray([{value:i.SingleLineCommentFormatType.KeepUnchanged,label:s.LocalizedConstants.Instance.keepUnchanged},{value:i.SingleLineCommentFormatType.WrapMultiline,label:s.LocalizedConstants.Instance.wrapMultiline},{value:i.SingleLineCommentFormatType.WrapSingleline,label:s.LocalizedConstants.Instance.wrapSingleLine}]),this.lineBrkBtwnStmtsOptions=t.observableArray([{value:2,label:s.LocalizedConstants.Instance.doubleBreak},{value:1,label:s.LocalizedConstants.Instance.singlebreak}]),this.lineBreakOptions=t.observableArray([{value:i.LineBreakPosition.After,label:s.LocalizedConstants.Instance.after},{value:i.LineBreakPosition.Before,label:s.LocalizedConstants.Instance.before},{value:i.LineBreakPosition.NoBreak,label:s.LocalizedConstants.Instance.noBreak}]),this.IfCaseWhilekOptions=t.observableArray([{value:i.IfCaseWhileFormatType.IndentedActionInlinedCondition,label:s.LocalizedConstants.Instance.indentedActionsInlinedConditions},{value:i.IfCaseWhileFormatType.Terse,label:s.LocalizedConstants.Instance.terse},{value:i.IfCaseWhileFormatType.LineBreaksAfterConditionAndAction,label:s.LocalizedConstants.Instance.lineBreakAfterConditionsAndActions},{value:i.IfCaseWhileFormatType.IndentedConditionAndAction,label:s.LocalizedConstants.Instance.indentedConditionsAndActions}]),this.wsAroundOperOptions=t.observableArray([{value:i.WhiteSpaceSetting.Default,label:s.LocalizedConstants.Instance.keepUnchanged},{value:i.WhiteSpaceSetting.AddSpace,label:s.LocalizedConstants.Instance.addSpace},{value:i.WhiteSpaceSetting.NoSpace,label:s.LocalizedConstants.Instance.noSpace}]),this.wsAroundParenOptions=t.observableArray([{value:i.WhiteSpaceSetting.Default,label:s.LocalizedConstants.Instance.keepUnchanged},{value:i.WhiteSpaceSetting.InsideBrackets,label:s.LocalizedConstants.Instance.inside},{value:i.WhiteSpaceSetting.OutsideBrackets,label:s.LocalizedConstants.Instance.outside},{value:i.WhiteSpaceSetting.InsideAndOutsideBrackets,label:s.LocalizedConstants.Instance.insideAndOutside},{value:i.WhiteSpaceSetting.NoSpace,label:s.LocalizedConstants.Instance.noSpace}]),this.yesNoOptions=t.observableArray([{value:!0,label:s.LocalizedConstants.Instance.yes},{value:!1,label:s.LocalizedConstants.Instance.no}]),this.isCommasPerLineValid=!0,this.isSpacesOutsideValid=!0,this.isSpacesInsideValid=!0,this.validateCommasPerLine=e=>{this.isPagePopulated&&(this.isCommasPerLineValid=this.isIpNumberValid(e.detail.value,25),this.areInputValuesValid()?(this.invalidValues(!1),this.onValueChanged(null,null,parseInt(e.detail.value))):this.invalidValues(!0))},this.validateInsideSpaces=e=>{this.isPagePopulated&&(this.isSpacesInsideValid=this.isIpNumberValid(e.detail.value,6),this.areInputValuesValid()?(this.invalidValues(!1),this.onValueChanged(parseInt(e.detail.value))):this.invalidValues(!0))},this.validateOutsideSpaces=e=>{this.isPagePopulated&&(this.isSpacesOutsideValid=this.isIpNumberValid(e.detail.value,6),this.areInputValuesValid()?(this.invalidValues(!1),this.onValueChanged(null,parseInt(e.detail.value))):this.invalidValues(!0))},this.preventNonDigits=e=>{(e&&e.key<"0"||e.key>"9"&&"Backspace"!=e.key&&"Tab"!=e.key&&"ArrowLeft"!=e.key&&"ArrowRight"!=e.key&&"Home"!=e.key&&"End"!=e.key&&"Delete"!=e.key)&&e.preventDefault()},this.onValueChanged=(e=null,t=null,n=null)=>{this.updateSaveButton(e,t,n)},this.onThemeChanged=()=>{n.DataAccessService.instance.logInfo("Theme Changed"),a.setContrast()},this.onPreview=()=>{n.DataAccessService.instance.logInfo("Sending formatting request from UI ...");const e=new i.FormatPreviewTextRequest,t=new i.MessageBase;t.type=i.MessageName.formatPreviewTextRequest,e.executionId=n.DataAccessService.instance.currentExecutionId,e.ownerUri=n.DataAccessService.instance.URI,e.windowUri=n.DataAccessService.instance.windowUri,e.text=this.textareaValue(),e.formatConfig=this.getActiveSettings(),t.data=e;try{n.DataAccessService.instance.send(t),this.isFormatting(!0),n.DataAccessService.instance.logInfo("Successfully placed format request for preview text")}catch(e){n.DataAccessService.instance.logError(e)}},this.onSaveSettings=()=>{n.DataAccessService.instance.logInfo("Saving formatter settings ..."),this.isSaving(!0),this.saveButtonDisable(!0);const e=new i.SaveFormatterSettingsRequest,t=new i.MessageBase;t.type=i.MessageName.saveFormatterSettingsRequest,e.executionId=n.DataAccessService.instance.currentExecutionId,e.ownerUri=n.DataAccessService.instance.URI,e.windowUri=n.DataAccessService.instance.windowUri,e.formatConfig=this.getActiveSettings(),e.configurationTarget=this.profileConfigurationTarget(),e.workspaceFolder=this.profileWorkspaceFolder(),t.data=e;try{n.DataAccessService.instance.send(t),n.DataAccessService.instance.logInfo("Successfully placed save formatter settings request ")}catch(e){n.DataAccessService.instance.logError(e)}},this.onReset=()=>{let e=new i.FormatOptions;e.identifierCasing=i.Casing.SameAsIntellisense,e.keywordCasing=i.Casing.SameAsIntellisense,e.singleLineComments=i.SingleLineCommentFormatType.KeepUnchanged,e.lineBrkBtwnStmts=2,e.lineBreakOnComma=i.LineBreakPosition.After,e.lineBreakOnConcat=i.LineBreakPosition.Before,e.lineBreakOnBooleanConn=i.LineBreakPosition.Before,e.lineBreakOnANSIJoins=!0,e.lineBreakBeforeLineComments=!1,e.lineBreakAfterSelectFromWhere=!0,e.lineBreakForIfCaseWhile=i.IfCaseWhileFormatType.IndentedActionInlinedCondition,e.wsAroundOperators=i.WhiteSpaceSetting.Default,e.wsAfterCommas=!0,e.wsAroundParenthesis=i.WhiteSpaceSetting.Default,e.commasPerLine=1,e.spacesInsideParenthesis=1,e.spacesOutsideParenthesis=1,this.initConfigValues(e),this.onValueChanged()},this.onExport=()=>{const e=new i.ExportFormatSettingsRequest,t=new i.MessageBase;t.type=i.MessageName.exportFormatSettingsRequest,e.executionId=n.DataAccessService.instance.currentExecutionId,e.ownerUri=n.DataAccessService.instance.URI,e.windowUri=n.DataAccessService.instance.windowUri,e.formatConfig=this.getActiveSettings(),t.data=e;try{n.DataAccessService.instance.send(t),n.DataAccessService.instance.logInfo("Successfully placed export formatter settings request "),this.isExporting(!0)}catch(e){n.DataAccessService.instance.logError(e)}},this.onImport=()=>{const e=new i.ImportFormatSettingsRequest,t=new i.MessageBase;t.type=i.MessageName.importFormatSettingsRequest,e.executionId=n.DataAccessService.instance.currentExecutionId,e.ownerUri=n.DataAccessService.instance.URI,e.windowUri=n.DataAccessService.instance.windowUri,t.data=e;try{n.DataAccessService.instance.send(t),n.DataAccessService.instance.logInfo("Successfully placed import formatter settings request "),this.isImporting(!0)}catch(e){n.DataAccessService.instance.logError(e)}},this.profileConfigurationTarget=t.observable(i.ConfigurationTarget.Global),this.profileWorkspaceFolder=t.observable(void 0),this.profileEditable=t.observable(!0),this.infoSignalToConfig=new c.Signal,this.infoSignalFromConfig=new c.Signal,this.settingsConfig=r.createConfig({name:"configSettings",params:{infoSignalToConfig:this.infoSignalToConfig,infoSignalFromConfig:this.infoSignalFromConfig,editable:this.profileEditable,profileConfigTarget:this.profileConfigurationTarget,profileWorkspaceFolder:this.profileWorkspaceFolder,fieldIdPrefix:"formatter"}}),this.onClearPageEvent=e=>{try{n.DataAccessService.instance.logInfo("OnclearPageEvent:"+JSON.stringify(e));const t=e.data;this.handleClearEvent(t)}catch(e){n.DataAccessService.instance.logError(e),o.MessagesService.getinstance().ShowMessage(s.LocalizedConstants.Instance.unableToClear)}},this.handleClearEvent=e=>{try{n.DataAccessService.instance.URI=e.uri,n.DataAccessService.instance.windowUri=e.windowUri,n.DataAccessService.instance.profileName=e.profileName,n.DataAccessService.instance.connectionUniqueId=e.connectionUniqueId,n.DataAccessService.instance.configurationTarget=e.configurationTarget,n.DataAccessService.instance.workspaceFolderName=e.workspaceFolderName,n.DataAccessService.instance.workspaceFolderIndex=e.workspaceFolderIndex,this.initialize(),this.initializeConfigSettings()}catch(e){n.DataAccessService.instance.logError(e),o.MessagesService.getinstance().ShowMessage(s.LocalizedConstants.Instance.unableToClear)}},this.moduleName=e.moduleName,this.messageHandlers.set(i.MessageName.themeChanged,this.onThemeChanged),this.messageHandlers.set(i.MessageName.odtConfigChanged,this.onConfigChanged),this.messageHandlers.set(i.MessageName.getFormatterSettingsResponse,(e=>{this.handleGetFormatterSettingsResponse(e)})),this.messageHandlers.set(i.MessageName.saveFormatterSettingsResponse,(e=>{this.handleSaveFormatterSettingsResponse(e)})),this.messageHandlers.set(i.MessageName.formatPreviewTextResponse,(e=>{this.handleFormatPreviewTextResponse(e)})),this.messageHandlers.set(i.MessageName.importFormatSettingsResponse,(e=>{this.handleImportFormatterSettingsResponse(e)})),this.messageHandlers.set(i.MessageName.exportFormatSettingsResponse,(e=>{this.handleExportFormatterSettingsResponse(e)})),this.messageHandlers.set(i.MessageName.clearPageEvent,this.onClearPageEvent),n.DataAccessService.instance.subscribe((e=>{if(e&&this.messageHandlers.get(e.type)){const t=this.messageHandlers.get(e.type);t&&t(e)}else n.DataAccessService.instance.logError(`Could not find handler for message ${e.type}`)})),n.DataAccessService.instance.logInfo("Fetching Localized resources "),n.DataAccessService.instance.getLocalizedData().done((e=>{n.DataAccessService.instance.logInfo("Fetched localized resources."),s.LocalizedConstants.Instance.Configure(e)})).fail((e=>{n.DataAccessService.instance.logError("Localized resources "+JSON.stringify(e))})),this.initialize(),a.setContrast(),this.initializeConfigSettings(),this.infoSignalFromConfig.add(((e,t)=>{this.handleInfoSignalFromConfig(e,t)}),this)}get messagesDataprovider(){return o.MessagesService.getinstance().messagesDataproviderField}get previewLabel(){return s.LocalizedConstants.Instance.preview}get formatterSettingsTitle(){return s.LocalizedConstants.Instance.formatterSettingsTitle}get formatterSettingsSubTitle(){return s.LocalizedConstants.Instance.formatterSettingsSubtitle}get keywordCaseLabel(){return s.LocalizedConstants.Instance.keywordCasingLabel}get identifierCaseLabel(){return s.LocalizedConstants.Instance.identifierCasingLabel}get singleLingeCommentLabel(){return s.LocalizedConstants.Instance.singleLineCommentLabel}get tabSizeLabel(){return s.LocalizedConstants.Instance.tabSize}get insertSpacesLabel(){return s.LocalizedConstants.Instance.insertSpaces}get indentSizeLabel(){return s.LocalizedConstants.Instance.indentSize}get lineBrkBtwnStmtsLabel(){return s.LocalizedConstants.Instance.lineBrkBtwnStmtsLabel}get lineBrkonCommaLabel(){return s.LocalizedConstants.Instance.lineBrkOnCommaLabel}get commasPerLineLabel(){return s.LocalizedConstants.Instance.commasPerLineLabel}get lineBrkonConcatLabel(){return s.LocalizedConstants.Instance.lineBreakOnConcatLabel}get lineBrkonBoolConnLabel(){return s.LocalizedConstants.Instance.lineBreakOnBoolConnLabel}get lineBrkonANSIJoinsLabel(){return s.LocalizedConstants.Instance.lineBreakOnANSIJoinLabel}get lineBrkBeforeLineCommentLabel(){return s.LocalizedConstants.Instance.lineBreakBeforeLineCommentLabel}get lineBrkAfterSelectFromWhereLabel(){return s.LocalizedConstants.Instance.lineBreakAfterSelectLabel}get lineBrkonIfCaseWhileLabel(){return s.LocalizedConstants.Instance.lineBreakOnIFCaseLabel}get wsAroundOperLabel(){return s.LocalizedConstants.Instance.wsOnOperLabel}get wsAfterCommasLabel(){return s.LocalizedConstants.Instance.wsOnCommaLabel}get wsAroundParenLabel(){return s.LocalizedConstants.Instance.wsAroundParenLabel}get spacesInsideLabel(){return s.LocalizedConstants.Instance.spacesInsideParen}get spacesOutsideLabel(){return s.LocalizedConstants.Instance.spacesOutsideParen}get previewFormattedTextLabel(){return s.LocalizedConstants.Instance.previewFormattedText}get saveLabel(){return s.LocalizedConstants.Instance.saveBtnLabel}get resetToDefaults(){return s.LocalizedConstants.Instance.resetToDefaults}get exportSettings(){return s.LocalizedConstants.Instance.exportSettings}get importSettings(){return s.LocalizedConstants.Instance.importSettings}get messageHandlers(){return this.messageHandlersField}set messageHandlers(e){this.messageHandlersField=e}initialize(){n.DataAccessService.instance.logInfo("Start initializing formatterSettingsModule"),o.MessagesService.getinstance().ClearAll();const e=new i.MessageBase;e.type=i.MessageName.getFormatterSettingsRequest;const t=new i.GetFormatterSettingsRequest;t.executionId=n.DataAccessService.instance.currentExecutionId,t.ownerUri=n.DataAccessService.instance.URI,t.windowUri=n.DataAccessService.instance.windowUri,t.configurationTarget=n.DataAccessService.instance.configurationTarget,t.workspaceFolder={uri:void 0,name:n.DataAccessService.instance.workspaceFolderName,index:n.DataAccessService.instance.workspaceFolderIndex},e.data=t;try{n.DataAccessService.instance.send(e),n.DataAccessService.instance.logInfo("Successfully placed get formatter settings request ")}catch(e){n.DataAccessService.instance.logError(e)}n.DataAccessService.instance.logInfo("End initializing")}isIpNumberValid(e,t=null){let n=parseFloat(e);return!(isNaN(n)||n<=0||n%1>0||null!=t&&n>t)}areInputValuesValid(){return this.isCommasPerLineValid&&this.isSpacesInsideValid&&this.isSpacesOutsideValid}updateSaveButton(e=null,t=null,s=null){try{if(!this.currentActiveSettings)return;let n=this.profileWorkspaceFolder(),i=this.currentActiveSettings.workspaceFolder;null==e&&(e=this.spacesInsideValue()),null==t&&(t=this.spacesOutsideValue()),null==s&&(s=this.commasPerLineValue()),this.isPagePopulated&&(this.selectedIdentifierCasing()!=this.currentActiveSettings.identifierCasing||this.selectedKeywordCasing()!=this.currentActiveSettings.keywordCasing||this.selectedLineCommentType()!=this.currentActiveSettings.singleLineComments||this.selectedLineBrkBtwnStmts()!=this.currentActiveSettings.lineBrkBtwnStmts||this.selectedLineBrkOnComma()!=this.currentActiveSettings.lineBreakOnComma||this.selectedLineBrkOnConcat()!=this.currentActiveSettings.lineBreakOnConcat||this.selectedLineBrkOnBoolConn()!=this.currentActiveSettings.lineBreakOnBooleanConn||this.enableANSIJoinLineBrk()!=this.currentActiveSettings.lineBreakOnANSIJoins||this.enableLineBrkBeforeComment()!=this.currentActiveSettings.lineBreakBeforeLineComments||this.enableLineBrkAfterSelect()!=this.currentActiveSettings.lineBreakAfterSelectFromWhere||this.selectedLineBrkOnIfCaseWhile()!=this.currentActiveSettings.lineBreakForIfCaseWhile||this.selectedwsAroundOper()!=this.currentActiveSettings.wsAroundOperators||this.selectedWsAroundParen()!=this.currentActiveSettings.wsAroundParenthesis||this.enableWsAfterCommas()!=this.currentActiveSettings.wsAfterCommas||e!=this.currentActiveSettings.spacesInsideParenthesis||t!=this.currentActiveSettings.spacesOutsideParenthesis||s!=this.currentActiveSettings.commasPerLine||this.profileConfigurationTarget()!==this.currentActiveSettings.configurationTarget||n&&!i||!n&&i||n&&i&&(n.name!==i.name||n.index!==i.index))?this.saveButtonDisable(!1):this.saveButtonDisable(!0)}catch(e){n.DataAccessService.instance.logInfo("Error in formatterSettingsModule.updateSaveButton processing"),n.DataAccessService.instance.logError(e)}}onConfigChanged(e){const t=e.data;n.DataAccessService.instance.updatedConfig(t)}initConfigValues(e){void 0!==e.identifierCasing&&this.selectedIdentifierCasing(e.identifierCasing),void 0!==e.keywordCasing&&this.selectedKeywordCasing(e.keywordCasing),void 0!==e.singleLineComments&&this.selectedLineCommentType(e.singleLineComments),void 0!==e.lineBrkBtwnStmts&&this.selectedLineBrkBtwnStmts(e.lineBrkBtwnStmts),void 0!==e.lineBreakOnComma&&this.selectedLineBrkOnComma(e.lineBreakOnComma),void 0!==e.lineBreakOnConcat&&this.selectedLineBrkOnConcat(e.lineBreakOnConcat),void 0!==e.lineBreakOnBooleanConn&&this.selectedLineBrkOnBoolConn(e.lineBreakOnBooleanConn),void 0!==e.lineBreakOnANSIJoins&&this.enableANSIJoinLineBrk(e.lineBreakOnANSIJoins),void 0!==e.lineBreakBeforeLineComments&&this.enableLineBrkBeforeComment(e.lineBreakBeforeLineComments),void 0!==e.lineBreakAfterSelectFromWhere&&this.enableLineBrkAfterSelect(e.lineBreakAfterSelectFromWhere),void 0!==e.lineBreakForIfCaseWhile&&this.selectedLineBrkOnIfCaseWhile(e.lineBreakForIfCaseWhile),void 0!==e.wsAroundOperators&&this.selectedwsAroundOper(e.wsAroundOperators),void 0!==e.wsAroundParenthesis&&this.selectedWsAroundParen(e.wsAroundParenthesis),void 0!==e.wsAfterCommas&&this.enableWsAfterCommas(e.wsAfterCommas),void 0!==e.commasPerLine&&this.commasPerLineValue(e.commasPerLine),void 0!==e.spacesInsideParenthesis&&this.spacesInsideValue(e.spacesInsideParenthesis),void 0!==e.spacesOutsideParenthesis&&this.spacesOutsideValue(e.spacesOutsideParenthesis)}getActiveSettings(){let e=new i.FormatOptions;try{e.identifierCasing=this.selectedIdentifierCasing(),e.keywordCasing=this.selectedKeywordCasing(),e.singleLineComments=this.selectedLineCommentType(),e.lineBrkBtwnStmts=this.selectedLineBrkBtwnStmts(),e.lineBreakOnComma=this.selectedLineBrkOnComma(),e.lineBreakOnConcat=this.selectedLineBrkOnConcat(),e.lineBreakOnBooleanConn=this.selectedLineBrkOnBoolConn(),e.lineBreakOnANSIJoins=this.enableANSIJoinLineBrk(),e.lineBreakBeforeLineComments=this.enableLineBrkBeforeComment(),e.lineBreakAfterSelectFromWhere=this.enableLineBrkAfterSelect(),e.lineBreakForIfCaseWhile=this.selectedLineBrkOnIfCaseWhile(),e.wsAroundOperators=this.selectedwsAroundOper(),e.wsAfterCommas=this.enableWsAfterCommas(),e.wsAroundParenthesis=this.selectedWsAroundParen(),e.commasPerLine=this.commasPerLineValue(),e.spacesInsideParenthesis=this.spacesInsideValue(),e.spacesOutsideParenthesis=this.spacesOutsideValue(),e.configurationTarget=this.profileConfigurationTarget(),e.workspaceFolder=this.profileWorkspaceFolder()}catch(e){n.DataAccessService.instance.logError(e)}return e}handleExportFormatterSettingsResponse(e){n.DataAccessService.instance.logInfo("Received ExportFormatSettingsResponse");try{const t=e.data;n.DataAccessService.instance.logInfo(t.resultMsg)}catch(e){n.DataAccessService.instance.logError(e)}finally{this.isExporting(!1)}}handleImportFormatterSettingsResponse(e){n.DataAccessService.instance.logInfo("Received SaveFormatterSettingsResponse");try{const t=e.data;t.formatConfig&&(this.initConfigValues(t.formatConfig),this.onValueChanged()),t.resultMsg&&(o.MessagesService.getinstance().ClearAll(),o.MessagesService.getinstance().ShowMessage(t.resultMsg),n.DataAccessService.instance.logInfo(t.resultMsg))}catch(e){n.DataAccessService.instance.logError(e)}finally{this.isImporting(!1)}}handleSaveFormatterSettingsResponse(e){n.DataAccessService.instance.logInfo("Received SaveFormatterSettingsResponse");try{const t=e.data;if(t)if(o.MessagesService.getinstance().ClearAll(),o.MessagesService.getinstance().ShowMessage(t.message),t.success){let e=this.profileConfigurationTarget(),t=this.profileWorkspaceFolder(),n=this.formatterSettings.findIndex((n=>n.configurationTarget===e&&(!n.workspaceFolder&&!t||n.workspaceFolder&&t&&n.workspaceFolder.name===t.name&&n.workspaceFolder.index===t.index)));n>-1&&(this.formatterSettings[n]=this.getActiveSettings(),this.currentActiveSettings=this.getActiveSettings())}else this.saveButtonDisable(!1)}catch(e){n.DataAccessService.instance.logError(e),this.saveButtonDisable(!1)}finally{this.isSaving(!1)}}handleGetFormatterSettingsResponse(e){n.DataAccessService.instance.logInfo("Received GetFormatterSettingsResponse");try{const t=e.data;this.showIndentSize(t.isIndentSizePresent),this.profileConfigurationTarget(t.configurationTarget),this.profileWorkspaceFolder(t.workspaceFolder),this.formatterSettings=t.formatConfig,this.updateUiFromSettings(),this.isPagePopulated=!0,this.onPreview()}catch(e){n.DataAccessService.instance.logError(e)}}updateUiFromSettings(){try{if(this.formatterSettings){let e=this.profileConfigurationTarget(),t=this.profileWorkspaceFolder(),n=this.formatterSettings.find((n=>n.configurationTarget===e&&(!n.workspaceFolder&&!t||n.workspaceFolder&&t&&n.workspaceFolder.name===t.name&&n.workspaceFolder.index===t.index)));n&&(this.currentActiveSettings=n,this.initConfigValues(n))}}catch(e){n.DataAccessService.instance.logError("Error in formatterSettingModule.updateUiFromSettings"),n.DataAccessService.instance.logError(e)}}handleFormatPreviewTextResponse(e){n.DataAccessService.instance.logInfo("Received FormatPreviewTextResponse");try{const t=e.data;t&&t.formattedText&&this.textareaValue(t.formattedText),n.DataAccessService.instance.logInfo("FormatPreviewTextResponse processed")}catch(e){n.DataAccessService.instance.logError(e)}this.isFormatting(!1)}initializeConfigSettings(){t.computed((()=>{let e=this.profileConfigurationTarget(),t=this.profileWorkspaceFolder();this.currentActiveSettings&&(e!==this.currentActiveSettings.configurationTarget||t&&!this.currentActiveSettings.workspaceFolder||!t&&this.currentActiveSettings.workspaceFolder||t&&this.currentActiveSettings.workspaceFolder&&(t.name!==this.currentActiveSettings.workspaceFolder.name||t.index!==this.currentActiveSettings.workspaceFolder.index))&&this.updateUiFromSettings(),this.updateSaveButton()}),this)}handleInfoSignalFromConfig(e,t){if(e===l.configSignalType.SaveConfirm){let e=t;e.promptToSave=!this.saveButtonDisable(),this.infoSignalToConfig.dispatch(l.configSignalType.SaveConfirm,e)}}}}));